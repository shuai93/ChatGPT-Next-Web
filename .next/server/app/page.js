(() => {
var exports = {};
exports.id = 931;
exports.ids = [931];
exports.modules = {

/***/ 8038:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react");

/***/ }),

/***/ 8704:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-dom/server-rendering-stub");

/***/ }),

/***/ 7897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-server-dom-webpack/client");

/***/ }),

/***/ 6786:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react/jsx-runtime");

/***/ }),

/***/ 3280:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/app-router-context.js");

/***/ }),

/***/ 9274:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hooks-client-context.js");

/***/ }),

/***/ 1751:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix.js");

/***/ }),

/***/ 1668:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/handle-smooth-scroll.js");

/***/ }),

/***/ 1897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot.js");

/***/ }),

/***/ 8854:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/parse-path.js");

/***/ }),

/***/ 3297:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash.js");

/***/ }),

/***/ 3349:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/server-inserted-html.js");

/***/ }),

/***/ 1017:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 7282:
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ 7310:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 1935:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8038);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _defs, _mask;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgAdd = function SvgAdd(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), _defs || (_defs = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("defs", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    id: "add_svg__a",
    d: "M0 0h16v16H0z"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", null, _mask || (_mask = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("mask", {
    id: "add_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("use", {
    xlinkHref: "#add_svg__a"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", {
    mask: "url(#add_svg__b)"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(1.333 1.333)",
    d: "M13.33 6.67A6.66 6.66 0 0 0 6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66Z"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(8 5.333)",
    d: "M0 0v5.33"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(5.333 8)",
    d: "M0 0h5.33"
  }))));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SvgAdd);

/***/ }),

/***/ 3106:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8038);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _defs, _rect, _mask, _mask2;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgBot = function SvgBot(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 30,
    height: 30,
    fill: "none"
  }, props), _defs || (_defs = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("defs", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    id: "bot_svg__a",
    d: "M0 0h30v30H0z"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    id: "bot_svg__c",
    d: "M0 0h20.455v20.455H0z"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", null, _rect || (_rect = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect", {
    fill: "#E7F8FF",
    width: 30,
    height: 30,
    rx: 10
  })), _mask || (_mask = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("mask", {
    id: "bot_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("use", {
    xlinkHref: "#bot_svg__a"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", {
    mask: "url(#bot_svg__b)"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", {
    transform: "translate(4.773 4.773)"
  }, _mask2 || (_mask2 = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("mask", {
    id: "bot_svg__d",
    fill: "#fff"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("use", {
    xlinkHref: "#bot_svg__c"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", {
    mask: "url(#bot_svg__d)"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    fillRule: "evenodd",
    style: {
      fill: "#1f948c"
    },
    d: "M19.11 8.37c.17-.52.26-1.06.26-1.61 0-.9-.24-1.79-.71-2.57a5.24 5.24 0 0 0-4.53-2.59c-.37 0-.73.04-1.09.11A5.201 5.201 0 0 0 9.17 0h-.04C6.86 0 4.86 1.44 4.16 3.57A5.11 5.11 0 0 0 .71 6.04C.24 6.83 0 7.72 0 8.63c0 1.27.48 2.51 1.35 3.45-.18.52-.27 1.07-.27 1.61 0 .91.25 1.8.71 2.58 1.13 1.94 3.41 2.94 5.63 2.47a5.18 5.18 0 0 0 3.86 1.71h.05c2.26 0 4.27-1.44 4.97-3.57a5.132 5.132 0 0 0 3.45-2.47c.46-.78.7-1.67.7-2.58 0-1.28-.48-2.51-1.34-3.46ZM8.947 18.158c-.04.03-.08.05-.12.07.7.58 1.57.89 2.48.89h.01c2.14 0 3.88-1.72 3.88-3.83v-4.76c0-.02-.02-.04-.04-.05l-1.74-.99v5.75c0 .23-.13.45-.34.57l-4.13 2.35Zm-.67-1.153 4.17-2.38c.02-.01.03-.03.03-.05v-1.99l-5.04 2.87c-.21.12-.47.12-.68 0l-4.13-2.35c-.04-.02-.09-.06-.12-.07-.04.21-.06.43-.06.65 0 .67.18 1.33.52 1.92v-.01c.7 1.19 1.98 1.92 3.37 1.92.68 0 1.35-.18 1.94-.51ZM3.903 5.168v-.14c-.85.31-1.57.9-2.02 1.68a3.78 3.78 0 0 0-.52 1.91c0 1.37.74 2.64 1.94 3.33l4.17 2.37c.02.01.04.01.06 0l1.75-1-5.04-2.87a.64.64 0 0 1-.34-.57v-4.71Zm13.253 3.337-4.18-2.38c-.02 0-.04 0-.06.01l-1.74.99 5.04 2.87c.21.12.34.34.34.58v4.85c1.52-.56 2.54-1.99 2.54-3.6 0-1.37-.74-2.63-1.94-3.32ZM8.014 5.83c-.02.01-.03.03-.03.05v1.99L13.024 5a.692.692 0 0 1 .68 0l4.13 2.35c.04.02.08.05.12.07.03-.21.05-.43.05-.65 0-2.11-1.74-3.83-3.88-3.83-.68 0-1.35.18-1.94.51l-4.17 2.38Zm1.133-4.492c-2.15 0-3.89 1.72-3.89 3.83v4.76c0 .02.02.03.03.04l1.75 1v-5.75c0-.23.13-.45.34-.57l4.13-2.35c.04-.03.09-.06.12-.07-.7-.58-1.58-.89-2.48-.89ZM7.983 11.51l2.24 1.27 2.25-1.27V8.95l-2.25-1.28-2.24 1.28v2.56Z"
  }))))));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SvgBot);

/***/ }),

/***/ 4299:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8038);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _defs, _mask;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgClose = function SvgClose(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), _defs || (_defs = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("defs", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    id: "close_svg__a",
    d: "M0 0h16v16H0z"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", null, _mask || (_mask = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("mask", {
    id: "close_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("use", {
    xlinkHref: "#close_svg__a"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", {
    mask: "url(#close_svg__b)"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(2.667 2.667)",
    d: "m0 0 10.67 10.67M0 10.67 10.67 0"
  }))));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SvgClose);

/***/ }),

/***/ 7360:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8038);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _path, _path2;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgDelete = function SvgDelete(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    width: 14.663,
    height: 14.663
  }, props), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", {
    style: {
      mixBlendMode: "passthrough"
    }
  }, _path || (_path = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    d: "M7.337.667c-3.69 0-6.67 2.98-6.67 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66a6.66 6.66 0 0 0-6.66-6.67Z",
    fillRule: "evenodd",
    fill: "#D8D8D8",
    fillOpacity: 0.01
  })), _path2 || (_path2 = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    d: "m10.138 5.471-4.667 4.667q-.046.046-.1.083-.055.036-.116.062-.06.025-.125.038-.064.012-.13.012t-.13-.012q-.064-.013-.125-.038-.06-.026-.115-.062-.055-.037-.101-.083-.047-.046-.083-.101-.037-.055-.062-.115-.025-.06-.038-.125-.013-.065-.013-.13 0-.066.013-.13.013-.065.038-.125.025-.061.062-.116.036-.054.083-.1l4.666-4.667q.047-.047.101-.083.055-.037.116-.062.06-.025.125-.038.064-.013.13-.013.065 0 .13.013.064.013.125.038.06.025.115.062.055.036.101.083.046.046.083.1.036.055.062.116.025.06.038.125.012.064.012.13t-.012.13q-.013.064-.038.125-.026.06-.062.115-.037.055-.083.101ZM5.471 4.53l.667.666q.046.047.083.101.036.055.062.116.025.06.038.125.012.064.012.13 0 .065-.012.13-.013.064-.038.125-.026.06-.062.115-.036.055-.083.101-.046.046-.1.083-.056.036-.116.062-.06.025-.125.038-.065.012-.13.012-.066 0-.13-.012-.065-.013-.125-.038-.061-.026-.116-.062-.054-.036-.1-.083l-.667-.667q-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.013-.064-.013-.13t.013-.13q.013-.064.038-.125.025-.06.062-.115.036-.055.083-.101.046-.047.1-.083.055-.037.116-.062.06-.025.125-.038.064-.013.13-.013t.13.013q.064.013.125.038.06.025.115.062.055.036.101.083Zm4 4 .667.666q.046.047.083.101.036.055.062.116.025.06.038.125.012.064.012.13 0 .065-.012.13-.013.064-.038.125-.026.06-.062.115-.036.055-.083.101-.046.046-.1.083-.056.036-.116.062-.06.025-.125.038-.065.012-.13.012-.066 0-.13-.012-.065-.013-.125-.038-.061-.026-.116-.062-.054-.036-.1-.083l-.667-.667q-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.013-.064-.013-.13t.013-.13q.013-.064.038-.125.025-.06.062-.115.036-.055.083-.101.046-.047.1-.083.055-.037.116-.062.06-.025.125-.038.064-.013.13-.013t.13.013q.064.013.125.038.06.025.115.062.055.036.101.083Zm3.859-1.192q0-2.491-1.755-4.248-1.754-1.756-4.238-1.756-2.492 0-4.248 1.756-1.756 1.756-1.756 4.248 0 2.484 1.756 4.238 1.757 1.755 4.248 1.755 2.484 0 4.238-1.755 1.755-1.754 1.755-4.238Zm1.333 0q0 3.036-2.145 5.181t-5.181 2.145q-3.043 0-5.19-2.145Q0 10.374 0 7.337q0-3.044 2.147-5.19Q4.293 0 7.337 0q3.037 0 5.181 2.147 2.145 2.147 2.145 5.19ZM10.332 5q0 .066-.013.13t-.038.125q-.025.06-.061.114-.037.055-.083.101-.046.047-.1.083-.055.036-.116.061-.06.025-.125.038-.064.013-.13.013-.065 0-.13-.013-.063-.013-.124-.038-.06-.025-.115-.061-.054-.036-.1-.083-.047-.046-.083-.1-.037-.055-.062-.115-.025-.061-.038-.125-.012-.064-.012-.13 0-.065.012-.13.013-.064.038-.124.025-.061.062-.115.036-.055.082-.101.047-.047.101-.083.055-.036.115-.061.06-.025.125-.038.064-.013.13-.013.065 0 .13.013.064.013.124.038t.115.061q.055.036.1.083.047.046.084.1.036.055.061.116.025.06.038.124.013.065.013.13ZM5.665 9.667q0 .065-.013.13-.013.064-.038.124t-.061.115q-.036.055-.083.1-.046.047-.1.084-.055.036-.116.061-.06.025-.124.038-.064.013-.13.013-.065 0-.13-.013-.064-.013-.124-.038-.061-.025-.115-.061-.055-.037-.101-.083-.047-.046-.083-.1-.036-.055-.061-.116-.025-.06-.038-.125-.013-.064-.013-.13 0-.065.013-.13.013-.063.038-.124.025-.06.061-.115.036-.054.083-.1.046-.047.1-.083.055-.037.116-.062.06-.025.124-.038.065-.012.13-.012.066 0 .13.012.064.013.124.038.061.025.115.062.055.036.101.082.047.047.083.101.036.055.061.115.025.06.038.125.013.064.013.13Zm0-4.667q0 .066-.013.13t-.038.125q-.025.06-.061.114-.036.055-.083.101-.046.047-.1.083-.055.036-.116.061-.06.025-.124.038-.064.013-.13.013-.065 0-.13-.013-.064-.013-.124-.038-.061-.025-.115-.061-.055-.036-.101-.083-.047-.046-.083-.1-.036-.055-.061-.115-.025-.061-.038-.125-.013-.064-.013-.13 0-.065.013-.13.013-.064.038-.124.025-.061.061-.115.036-.055.083-.101.046-.047.1-.083.055-.036.116-.061.06-.025.124-.038.065-.013.13-.013.066 0 .13.013t.124.038q.061.025.115.061.055.036.101.083.047.046.083.1.036.055.061.116.025.06.038.124.013.065.013.13Zm.667.667q0 .065-.013.13-.013.064-.038.124t-.061.115q-.037.055-.083.1-.046.047-.1.084-.055.036-.116.061-.06.025-.125.038-.064.013-.13.013-.065 0-.13-.013-.063-.013-.124-.038-.06-.025-.115-.061-.054-.037-.1-.083-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.012-.064-.012-.13 0-.065.012-.13.013-.063.038-.124.025-.06.062-.115.036-.054.082-.1.047-.047.101-.083.055-.037.115-.062.06-.025.125-.038.064-.012.13-.012.065 0 .13.012.064.013.124.038t.115.062q.055.036.1.082.047.047.084.101.036.055.061.115.025.06.038.125.013.064.013.13ZM9.665 9q0 .066-.013.13t-.038.125q-.025.06-.061.114-.036.055-.083.101-.046.047-.1.083-.055.036-.116.061-.06.025-.124.038-.064.013-.13.013-.065 0-.13-.013-.064-.013-.124-.038-.061-.025-.115-.061-.055-.036-.101-.083-.047-.046-.083-.1-.036-.055-.061-.115-.025-.061-.038-.125-.013-.064-.013-.13 0-.065.013-.13.013-.064.038-.124.025-.061.061-.115.036-.055.083-.101.046-.047.1-.083.055-.036.116-.061.06-.025.124-.038.065-.013.13-.013.066 0 .13.013t.124.038q.061.025.115.061.055.036.101.083.047.046.083.1.036.055.061.116.025.06.038.124.013.065.013.13Zm.667.667q0 .065-.013.13-.013.064-.038.124t-.061.115q-.037.055-.083.1-.046.047-.1.084-.055.036-.116.061-.06.025-.125.038-.064.013-.13.013-.065 0-.13-.013-.063-.013-.124-.038-.06-.025-.115-.061-.054-.037-.1-.083-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.012-.064-.012-.13 0-.065.012-.13.013-.063.038-.124.025-.06.062-.115.036-.054.082-.1.047-.047.101-.083.055-.037.115-.062.06-.025.125-.038.064-.012.13-.012.065 0 .13.012.064.013.124.038t.115.062q.055.036.1.082.047.047.084.101.036.055.061.115.025.06.038.125.013.064.013.13Z",
    fill: "var(--primary)"
  }))));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SvgDelete);

/***/ }),

/***/ 3076:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8038);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _circle, _circle2, _circle3;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgThreeDots = function SvgThreeDots(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    width: 30,
    height: 14,
    viewBox: "0 0 120 30",
    xmlns: "http://www.w3.org/2000/svg",
    fill: "#fff"
  }, props), _circle || (_circle = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle", {
    cx: 15,
    cy: 15,
    r: 15,
    fill: "var(--primary, red)"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("animate", {
    attributeName: "r",
    from: 15,
    to: 15,
    begin: "0s",
    dur: "0.8s",
    values: "15;9;15",
    calcMode: "linear",
    repeatCount: "indefinite"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("animate", {
    attributeName: "fill-opacity",
    from: 1,
    to: 1,
    begin: "0s",
    dur: "0.8s",
    values: "1;.5;1",
    calcMode: "linear",
    repeatCount: "indefinite"
  }))), _circle2 || (_circle2 = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle", {
    cx: 60,
    cy: 15,
    r: 9,
    fillOpacity: 0.3,
    fill: "var(--primary, red)"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("animate", {
    attributeName: "r",
    from: 9,
    to: 9,
    begin: "0s",
    dur: "0.8s",
    values: "9;15;9",
    calcMode: "linear",
    repeatCount: "indefinite"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("animate", {
    attributeName: "fill-opacity",
    from: 0.5,
    to: 0.5,
    begin: "0s",
    dur: "0.8s",
    values: ".5;1;.5",
    calcMode: "linear",
    repeatCount: "indefinite"
  }))), _circle3 || (_circle3 = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle", {
    cx: 105,
    cy: 15,
    r: 15,
    fill: "var(--primary, red)"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("animate", {
    attributeName: "r",
    from: 15,
    to: 15,
    begin: "0s",
    dur: "0.8s",
    values: "15;9;15",
    calcMode: "linear",
    repeatCount: "indefinite"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("animate", {
    attributeName: "fill-opacity",
    from: 1,
    to: 1,
    begin: "0s",
    dur: "0.8s",
    values: "1;.5;1",
    calcMode: "linear",
    repeatCount: "indefinite"
  }))));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SvgThreeDots);

/***/ }),

/***/ 5324:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AppRouter": () => (/* reexport default from dynamic */ next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0___default.a),
/* harmony export */   "GlobalError": () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3___default.a),
/* harmony export */   "LayoutRouter": () => (/* reexport default from dynamic */ next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1___default.a),
/* harmony export */   "RenderFromTemplateContext": () => (/* reexport default from dynamic */ next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   "__next_app_webpack_require__": () => (/* binding */ __next_app_webpack_require__),
/* harmony export */   "pages": () => (/* binding */ pages),
/* harmony export */   "renderToReadableStream": () => (/* reexport safe */ next_dist_compiled_react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_7__.renderToReadableStream),
/* harmony export */   "requestAsyncStorage": () => (/* reexport safe */ next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5__.requestAsyncStorage),
/* harmony export */   "serverHooks": () => (/* reexport module object */ next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_6__),
/* harmony export */   "staticGenerationAsyncStorage": () => (/* reexport safe */ next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4__.staticGenerationAsyncStorage),
/* harmony export */   "tree": () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2286);
/* harmony import */ var next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5717);
/* harmony import */ var next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8353);
/* harmony import */ var next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7340);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9029);
/* harmony import */ var next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2458);
/* harmony import */ var next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(4065);
/* harmony import */ var next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var next_dist_compiled_react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8378);

    const tree = {
        children: [
        '',
        {
        children: ['', {}, {
          page: [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 311)), "/Users/shuai.yang1/myself/ChatGPT-Next-Web/app/page.tsx"],
          
        }]
      },
        {
          'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 9059)), "/Users/shuai.yang1/myself/ChatGPT-Next-Web/app/layout.tsx"],
          
        }
      ]
      }.children;
    const pages = ["/Users/shuai.yang1/myself/ChatGPT-Next-Web/app/page.tsx"];

    
    
    
    

    
    
    

    

    
    const __next_app_webpack_require__ = __webpack_require__
  

/***/ }),

/***/ 6515:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 7080));
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 5900))

/***/ }),

/***/ 4979:
/***/ (() => {



/***/ }),

/***/ 7629:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 5958, 23));
Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 8950, 23));
Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 2513, 23));
Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 1551, 23))

/***/ }),

/***/ 373:
/***/ ((module) => {

// Exports
module.exports = {
	"icon-button": "button_icon-button__BC_Ca",
	"shadow": "button_shadow__Ap98F",
	"border": "button_border__nGPHl",
	"icon-button-icon": "button_icon-button-icon__qlUH3",
	"icon-button-text": "button_icon-button-text__k3vob"
};


/***/ }),

/***/ 3493:
/***/ ((module) => {

// Exports
module.exports = {
	"prompt-toast": "chat_prompt-toast__v0Ha5",
	"prompt-toast-inner": "chat_prompt-toast-inner__qUzGo",
	"slide-in-from-top": "chat_slide-in-from-top__QIZOS",
	"prompt-toast-content": "chat_prompt-toast-content__tDz2h",
	"context-prompt": "chat_context-prompt__a3Xrj",
	"context-prompt-row": "chat_context-prompt-row__D24xk",
	"context-role": "chat_context-role___RwCJ",
	"context-content": "chat_context-content__3iEuJ",
	"context-delete-button": "chat_context-delete-button__rSrlO",
	"context-prompt-button": "chat_context-prompt-button__MmudR",
	"memory-prompt": "chat_memory-prompt__HLWNg",
	"memory-prompt-title": "chat_memory-prompt-title__eZIzp",
	"memory-prompt-action": "chat_memory-prompt-action__eyGdY",
	"memory-prompt-content": "chat_memory-prompt-content__Zgo_G",
	"slide-in": "chat_slide-in__jGTU7"
};


/***/ }),

/***/ 7986:
/***/ ((module) => {

// Exports
module.exports = {
	"window-header": "home_window-header__248BE",
	"window-header-title": "home_window-header-title__bJCkO",
	"window-header-main-title": "home_window-header-main-title__Y16Es",
	"window-header-sub-title": "home_window-header-sub-title__9rZM1",
	"window-actions": "home_window-actions__k4f3s",
	"window-action-button": "home_window-action-button__Is6GK",
	"container": "home_container__Myqoy",
	"tight-container": "home_tight-container__sz6zy",
	"sidebar": "home_sidebar__4L4yT",
	"window-content": "home_window-content__RRVow",
	"mobile": "home_mobile__ako7k",
	"sidebar-show": "home_sidebar-show__I77cg",
	"sidebar-header": "home_sidebar-header__b5asC",
	"sidebar-logo": "home_sidebar-logo__FFdBS",
	"sidebar-title": "home_sidebar-title__d8_c_",
	"sidebar-sub-title": "home_sidebar-sub-title__IS2Or",
	"sidebar-body": "home_sidebar-body__zSPJN",
	"chat-item": "home_chat-item__7LfQR",
	"chat-item-selected": "home_chat-item-selected__6TyNm",
	"chat-item-title": "home_chat-item-title__LZXA_",
	"chat-item-delete": "home_chat-item-delete__xQ_8e",
	"chat-item-info": "home_chat-item-info__UAzOv",
	"sidebar-tail": "home_sidebar-tail__R8VX2",
	"sidebar-actions": "home_sidebar-actions__zyNfR",
	"sidebar-action": "home_sidebar-action__JhMu0",
	"chat": "home_chat__7Bh_I",
	"chat-body": "home_chat-body__mbaM8",
	"chat-body-title": "home_chat-body-title__5S8w4",
	"chat-message": "home_chat-message__rdH_g",
	"chat-message-user": "home_chat-message-user__WsuiB",
	"chat-message-container": "home_chat-message-container__plj_e",
	"slide-in": "home_slide-in__gYZA0",
	"chat-message-top-actions": "home_chat-message-top-actions__PfOzb",
	"chat-message-avatar": "home_chat-message-avatar__611lI",
	"chat-message-status": "home_chat-message-status__EsVNi",
	"user-avtar": "home_user-avtar__3QksJ",
	"chat-message-item": "home_chat-message-item__hDEOq",
	"chat-message-top-action": "home_chat-message-top-action__wXKmA",
	"chat-message-actions": "home_chat-message-actions__nrHd1",
	"chat-message-action-date": "home_chat-message-action-date__6ToUp",
	"chat-input-panel": "home_chat-input-panel__kmhBn",
	"prompt-hints": "home_prompt-hints__Nv0JN",
	"prompt-hint": "home_prompt-hint__7bycW",
	"hint-title": "home_hint-title__V1gw6",
	"hint-content": "home_hint-content__GHRmC",
	"prompt-hint-selected": "home_prompt-hint-selected__LI_5l",
	"chat-input-panel-inner": "home_chat-input-panel-inner__8J59p",
	"chat-input": "home_chat-input__qM_hd",
	"chat-input-send": "home_chat-input-send__rsJfH",
	"export-content": "home_export-content__ZTj0v",
	"loading-content": "home_loading-content__tru2c",
	"slide-in-from-top": "home_slide-in-from-top__DysOS"
};


/***/ }),

/***/ 3304:
/***/ ((module) => {

// Exports
module.exports = {
	"card": "ui-lib_card__umMjN",
	"popover": "ui-lib_popover__5cywD",
	"popover-content": "ui-lib_popover-content__gZ0he",
	"slide-in": "ui-lib_slide-in__iob7i",
	"popover-mask": "ui-lib_popover-mask__iViG8",
	"list-item": "ui-lib_list-item__MN4sf",
	"list": "ui-lib_list__uHeWh",
	"modal-container": "ui-lib_modal-container__Ra9HB",
	"modal-header": "ui-lib_modal-header__S9ma8",
	"modal-title": "ui-lib_modal-title__i_dpP",
	"modal-close-btn": "ui-lib_modal-close-btn__mIjOX",
	"modal-content": "ui-lib_modal-content__nFcGO",
	"modal-footer": "ui-lib_modal-footer__J_cgq",
	"modal-actions": "ui-lib_modal-actions__0VvYa",
	"modal-action": "ui-lib_modal-action__12xLt",
	"show": "ui-lib_show__3Gd4p",
	"hide": "ui-lib_hide__GF1sp",
	"toast-container": "ui-lib_toast-container__7epyd",
	"toast-content": "ui-lib_toast-content__XpHSf",
	"toast-action": "ui-lib_toast-action__wO4Lv",
	"input": "ui-lib_input__v_cwR",
	"slide-in-from-top": "ui-lib_slide-in-from-top__Qfsdu"
};


/***/ }),

/***/ 1599:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* __next_internal_client_entry_do_not_use__ Loading,Home */ const { createProxy  } = __webpack_require__(1399);
module.exports = createProxy("/Users/shuai.yang1/myself/ChatGPT-Next-Web/app/components/home.tsx");


/***/ }),

/***/ 9059:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ RootLayout),
  "metadata": () => (/* binding */ metadata)
});

// EXTERNAL MODULE: ./node_modules/next/dist/compiled/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(4458);
// EXTERNAL MODULE: ./app/styles/globals.scss
var globals = __webpack_require__(8036);
// EXTERNAL MODULE: ./app/styles/markdown.scss
var markdown = __webpack_require__(5322);
// EXTERNAL MODULE: ./app/styles/highlight.scss
var highlight = __webpack_require__(6741);
;// CONCATENATED MODULE: external "child_process"
const external_child_process_namespaceObject = require("child_process");
var external_child_process_default = /*#__PURE__*/__webpack_require__.n(external_child_process_namespaceObject);
// EXTERNAL MODULE: ./node_modules/spark-md5/spark-md5.js
var spark_md5 = __webpack_require__(3231);
var spark_md5_default = /*#__PURE__*/__webpack_require__.n(spark_md5);
;// CONCATENATED MODULE: ./app/api/access.ts

function getAccessCodes() {
    const code = process.env.CODE;
    try {
        const codes = (code?.split(",") ?? []).filter((v)=>!!v).map((v)=>spark_md5_default().hash(v.trim()));
        return new Set(codes);
    } catch (e) {
        return new Set();
    }
}
const ACCESS_CODES = getAccessCodes();
const IS_IN_DOCKER = process.env.DOCKER;

;// CONCATENATED MODULE: ./app/layout.tsx
/* eslint-disable @next/next/no-page-custom-font */ 





let COMMIT_ID;
try {
    COMMIT_ID = external_child_process_default().execSync("git rev-parse --short HEAD").toString().trim();
} catch (e) {
    console.error("No git or not from git repo.");
}
const metadata = {
    title: "ChatGPT Next Web",
    description: "Your personal ChatGPT Chat Bot.",
    appleWebApp: {
        title: "ChatGPT Next Web",
        statusBarStyle: "default"
    },
    themeColor: "#fafafa"
};
function Meta() {
    const metas = {
        version: COMMIT_ID ?? "unknown",
        access: ACCESS_CODES.size > 0 || IS_IN_DOCKER ? "enabled" : "disabled"
    };
    return /*#__PURE__*/ jsx_runtime.jsx(jsx_runtime.Fragment, {
        children: Object.entries(metas).map(([k, v])=>/*#__PURE__*/ jsx_runtime.jsx("meta", {
                name: k,
                content: v
            }, k))
    });
}
function RootLayout({ children  }) {
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("html", {
        lang: "en",
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("head", {
                children: [
                    /*#__PURE__*/ jsx_runtime.jsx("meta", {
                        name: "viewport",
                        content: "width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
                    }),
                    /*#__PURE__*/ jsx_runtime.jsx("meta", {
                        name: "theme-color",
                        content: "#151515",
                        media: "(prefers-color-scheme: dark)"
                    }),
                    /*#__PURE__*/ jsx_runtime.jsx(Meta, {}),
                    /*#__PURE__*/ jsx_runtime.jsx("link", {
                        rel: "manifest",
                        href: "/site.webmanifest"
                    }),
                    /*#__PURE__*/ jsx_runtime.jsx("link", {
                        rel: "preconnect",
                        href: "https://fonts.googleapis.com"
                    }),
                    /*#__PURE__*/ jsx_runtime.jsx("link", {
                        rel: "preconnect",
                        href: "https://fonts.gstatic.com"
                    }),
                    /*#__PURE__*/ jsx_runtime.jsx("link", {
                        href: "https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;700;900&display=swap",
                        rel: "stylesheet"
                    }),
                    /*#__PURE__*/ jsx_runtime.jsx("script", {
                        src: "/serviceWorkerRegister.js",
                        defer: true
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime.jsx("body", {
                children: children
            })
        ]
    });
}


/***/ }),

/***/ 311:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ App)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4458);
/* harmony import */ var _vercel_analytics_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4255);
/* harmony import */ var _components_home__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1599);
/* harmony import */ var _components_home__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_components_home__WEBPACK_IMPORTED_MODULE_2__);



function App() {
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_home__WEBPACK_IMPORTED_MODULE_2__.Home, {}),
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_vercel_analytics_react__WEBPACK_IMPORTED_MODULE_1__/* .Analytics */ .c, {})
        ]
    });
}


/***/ }),

/***/ 45:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "h": () => (/* binding */ IconButton)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6786);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8038);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _button_module_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(373);
/* harmony import */ var _button_module_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_button_module_scss__WEBPACK_IMPORTED_MODULE_2__);



function IconButton(props) {
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button", {
        className: (_button_module_scss__WEBPACK_IMPORTED_MODULE_2___default()["icon-button"]) + ` ${props.bordered && (_button_module_scss__WEBPACK_IMPORTED_MODULE_2___default().border)} ${props.shadow && (_button_module_scss__WEBPACK_IMPORTED_MODULE_2___default().shadow)} ${props.className ?? ""} clickable`,
        onClick: props.onClick,
        title: props.title,
        disabled: props.disabled,
        role: "button",
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: (_button_module_scss__WEBPACK_IMPORTED_MODULE_2___default()["icon-button-icon"]) + ` ${props.noDark && "no-dark"}`,
                children: props.icon
            }),
            props.text && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: (_button_module_scss__WEBPACK_IMPORTED_MODULE_2___default()["icon-button-text"]),
                children: props.text
            })
        ]
    });
}


/***/ }),

/***/ 101:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "qE": () => (/* binding */ Avatar),
  "en": () => (/* binding */ Chat)
});

// UNUSED EXPORTS: PromptHints

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(6786);
// EXTERNAL MODULE: ./node_modules/use-debounce/dist/index.module.js
var index_module = __webpack_require__(238);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(8038);
;// CONCATENATED MODULE: ./app/icons/send-white.svg
var _defs, _mask;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgSendWhite = function SvgSendWhite(props) {
  return /*#__PURE__*/react_.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), _defs || (_defs = /*#__PURE__*/react_.createElement("defs", null, /*#__PURE__*/react_.createElement("path", {
    id: "send-white_svg__a",
    d: "M0 0h16v16H0z"
  }))), /*#__PURE__*/react_.createElement("g", null, _mask || (_mask = /*#__PURE__*/react_.createElement("mask", {
    id: "send-white_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react_.createElement("use", {
    xlinkHref: "#send-white_svg__a"
  }))), /*#__PURE__*/react_.createElement("g", {
    mask: "url(#send-white_svg__b)"
  }, /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#fff",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(1.333 2)",
    d: "M0 4.71 6.67 6l1.67 6.67L12.67 0 0 4.71Z"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#fff",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(8.003 6.117)",
    d: "M0 1.89 1.89 0"
  }))));
};
/* harmony default export */ const send_white = (SvgSendWhite);
;// CONCATENATED MODULE: ./app/icons/return.svg
var return_defs, return_mask;
function return_extends() { return_extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return return_extends.apply(this, arguments); }

var SvgReturn = function SvgReturn(props) {
  return /*#__PURE__*/react_.createElement("svg", return_extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), return_defs || (return_defs = /*#__PURE__*/react_.createElement("defs", null, /*#__PURE__*/react_.createElement("path", {
    id: "return_svg__a",
    d: "M0 0h16v16H0z"
  }))), /*#__PURE__*/react_.createElement("g", null, return_mask || (return_mask = /*#__PURE__*/react_.createElement("mask", {
    id: "return_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react_.createElement("use", {
    xlinkHref: "#return_svg__a"
  }))), /*#__PURE__*/react_.createElement("g", {
    mask: "url(#return_svg__b)"
  }, /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(2 2.667)",
    d: "M2.33 0 0 2l2.33 2.33"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(2 4.667)",
    d: "M0 0h7.66c2.3 0 4.25 1.87 4.34 4.17.09 2.42-1.91 4.5-4.34 4.5H2"
  }))));
};
/* harmony default export */ const icons_return = (SvgReturn);
;// CONCATENATED MODULE: ./app/icons/copy.svg
var copy_defs, copy_mask;
function copy_extends() { copy_extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return copy_extends.apply(this, arguments); }

var SvgCopy = function SvgCopy(props) {
  return /*#__PURE__*/react_.createElement("svg", copy_extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), copy_defs || (copy_defs = /*#__PURE__*/react_.createElement("defs", null, /*#__PURE__*/react_.createElement("path", {
    id: "copy_svg__a",
    d: "M0 0h16v16H0z"
  }))), /*#__PURE__*/react_.createElement("g", null, copy_mask || (copy_mask = /*#__PURE__*/react_.createElement("mask", {
    id: "copy_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react_.createElement("use", {
    xlinkHref: "#copy_svg__a"
  }))), /*#__PURE__*/react_.createElement("g", {
    mask: "url(#copy_svg__b)"
  }, /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(4.333 1.667)",
    d: "M0 2.48V.94C0 .42.42 0 .94 0h8.12c.52 0 .94.42.94.94v8.12c0 .52-.42.94-.94.94H7.51"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(1.667 4.333)",
    d: "M.94 0C.42 0 0 .42 0 .94v8.12c0 .52.42.94.94.94h8.12c.52 0 .94-.42.94-.94V.94C10 .42 9.58 0 9.06 0H.94Z"
  }))));
};
/* harmony default export */ const copy = (SvgCopy);
;// CONCATENATED MODULE: ./app/icons/download.svg
var download_defs, download_mask;
function download_extends() { download_extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return download_extends.apply(this, arguments); }

var SvgDownload = function SvgDownload(props) {
  return /*#__PURE__*/React.createElement("svg", download_extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), download_defs || (download_defs = /*#__PURE__*/React.createElement("defs", null, /*#__PURE__*/React.createElement("path", {
    id: "download_svg__a",
    d: "M0 0h16v16H0z"
  }))), /*#__PURE__*/React.createElement("g", null, download_mask || (download_mask = /*#__PURE__*/React.createElement("mask", {
    id: "download_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/React.createElement("use", {
    xlinkHref: "#download_svg__a"
  }))), /*#__PURE__*/React.createElement("g", {
    mask: "url(#download_svg__b)"
  }, /*#__PURE__*/React.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(2 2)",
    d: "M1 12h10c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1H1C.45 0 0 .45 0 1v10c0 .55.45 1 1 1Z"
  }), /*#__PURE__*/React.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(1.333 10.333)",
    d: "M0 0h3.67l.66 1.33H9L9.67 0h3.66"
  }), /*#__PURE__*/React.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(14 8.667)",
    d: "M0 3.33V0"
  }), /*#__PURE__*/React.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(6 7.333)",
    d: "m0 0 2 2 2-2"
  }), /*#__PURE__*/React.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(8 4)",
    d: "M0 5.33V0"
  }), /*#__PURE__*/React.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(2 8.667)",
    d: "M0 3.33V0"
  }))));
};
/* harmony default export */ const download = ((/* unused pure expression or super */ null && (SvgDownload)));
// EXTERNAL MODULE: ./app/icons/three-dots.svg
var three_dots = __webpack_require__(3076);
// EXTERNAL MODULE: ./app/icons/bot.svg
var bot = __webpack_require__(3106);
// EXTERNAL MODULE: ./app/icons/add.svg
var add = __webpack_require__(1935);
// EXTERNAL MODULE: ./app/icons/delete.svg
var icons_delete = __webpack_require__(7360);
// EXTERNAL MODULE: ./app/store/index.ts + 2 modules
var store = __webpack_require__(6388);
// EXTERNAL MODULE: ./app/utils.ts
var utils = __webpack_require__(172);
// EXTERNAL MODULE: ./node_modules/next/dist/shared/lib/app-dynamic.js
var app_dynamic = __webpack_require__(6101);
var app_dynamic_default = /*#__PURE__*/__webpack_require__.n(app_dynamic);
// EXTERNAL MODULE: ./app/requests.ts
var requests = __webpack_require__(6154);
// EXTERNAL MODULE: ./app/store/prompt.ts
var store_prompt = __webpack_require__(5273);
// EXTERNAL MODULE: ./app/locales/index.ts + 5 modules
var locales = __webpack_require__(4708);
// EXTERNAL MODULE: ./app/components/button.tsx
var components_button = __webpack_require__(45);
// EXTERNAL MODULE: ./app/components/home.module.scss
var home_module = __webpack_require__(7986);
var home_module_default = /*#__PURE__*/__webpack_require__.n(home_module);
// EXTERNAL MODULE: ./app/components/chat.module.scss
var chat_module = __webpack_require__(3493);
var chat_module_default = /*#__PURE__*/__webpack_require__.n(chat_module);
// EXTERNAL MODULE: ./app/components/ui-lib.tsx + 1 modules
var ui_lib = __webpack_require__(198);
;// CONCATENATED MODULE: ./app/components/chat.tsx





















const Markdown = app_dynamic_default()(async ()=>/*#__PURE__*/ (0,react_.memo)((await Promise.all(/* import() */[__webpack_require__.e(913), __webpack_require__.e(928)]).then(__webpack_require__.bind(__webpack_require__, 9928))).Markdown), {
    loadableGenerated: {
        modules: [
            "/Users/shuai.yang1/myself/ChatGPT-Next-Web/app/components/chat.tsx -> " + "./markdown"
        ]
    },
    loading: ()=>/*#__PURE__*/ jsx_runtime_.jsx(three_dots/* default */.Z, {})
});
const Emoji = app_dynamic_default()(async ()=>(await __webpack_require__.e(/* import() */ 480).then(__webpack_require__.bind(__webpack_require__, 480))).Emoji, {
    loadableGenerated: {
        modules: [
            "/Users/shuai.yang1/myself/ChatGPT-Next-Web/app/components/chat.tsx -> " + "emoji-picker-react"
        ]
    },
    loading: ()=>/*#__PURE__*/ jsx_runtime_.jsx(three_dots/* default */.Z, {})
});
function Avatar(props) {
    const config = (0,store/* useChatStore */.aK)((state)=>state.config);
    if (props.role !== "user") {
        return /*#__PURE__*/ jsx_runtime_.jsx(bot/* default */.Z, {
            className: (home_module_default())["user-avtar"]
        });
    }
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        children: " "
    });
}
function exportMessages(messages, topic) {
    const mdText = `# ${topic}\n\n` + messages.map((m)=>{
        return m.role === "user" ? `## ${Locale.Export.MessageFromYou}:\n${m.content}` : `## ${Locale.Export.MessageFromChatGPT}:\n${m.content.trim()}`;
    }).join("\n\n");
    const filename = `${topic}.md`;
    showModal({
        title: Locale.Export.Title,
        children: /*#__PURE__*/ _jsx("div", {
            className: "markdown-body",
            children: /*#__PURE__*/ _jsx("pre", {
                className: styles["export-content"],
                children: mdText
            })
        }),
        actions: [
            /*#__PURE__*/ _jsx(IconButton, {
                icon: /*#__PURE__*/ _jsx(CopyIcon, {}),
                bordered: true,
                text: Locale.Export.Copy,
                onClick: ()=>copyToClipboard(mdText)
            }, "copy"),
            /*#__PURE__*/ _jsx(IconButton, {
                icon: /*#__PURE__*/ _jsx(DownloadIcon, {}),
                bordered: true,
                text: Locale.Export.Download,
                onClick: ()=>downloadAs(mdText, filename)
            }, "download")
        ]
    });
}
function PromptToast(props) {
    const chatStore = (0,store/* useChatStore */.aK)();
    const session = chatStore.currentSession();
    const context = session.context;
    const addContextPrompt = (prompt1)=>{
        chatStore.updateCurrentSession((session)=>{
            session.context.push(prompt1);
        });
    };
    const removeContextPrompt = (i)=>{
        chatStore.updateCurrentSession((session)=>{
            session.context.splice(i, 1);
        });
    };
    const updateContextPrompt = (i, prompt1)=>{
        chatStore.updateCurrentSession((session)=>{
            session.context[i] = prompt1;
        });
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: (chat_module_default())["prompt-toast"],
        children: [
            props.showToast && /*#__PURE__*/ jsx_runtime_.jsx("div", {}),
            props.showModal && /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "modal-mask",
                children: /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* Modal */.u_, {
                    title: locales/* default.Context.Edit */.ZP.Context.Edit,
                    onClose: ()=>props.setShowModal(false),
                    actions: [
                        /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                            icon: /*#__PURE__*/ jsx_runtime_.jsx(copy, {}),
                            bordered: true,
                            text: locales/* default.Memory.Reset */.ZP.Memory.Reset,
                            onClick: ()=>confirm(locales/* default.Memory.ResetConfirm */.ZP.Memory.ResetConfirm) && chatStore.resetSession()
                        }, "reset"),
                        /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                            icon: /*#__PURE__*/ jsx_runtime_.jsx(copy, {}),
                            bordered: true,
                            text: locales/* default.Memory.Copy */.ZP.Memory.Copy,
                            onClick: ()=>(0,utils/* copyToClipboard */.vQ)(session.memoryPrompt)
                        }, "copy")
                    ],
                    children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: (chat_module_default())["context-prompt"],
                                children: [
                                    context.map((c, i)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            className: (chat_module_default())["context-prompt-row"],
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("select", {
                                                    value: c.role,
                                                    className: (chat_module_default())["context-role"],
                                                    onChange: (e)=>updateContextPrompt(i, {
                                                            ...c,
                                                            role: e.target.value
                                                        }),
                                                    children: store/* ROLES.map */.K$.map((r)=>/*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                            value: r,
                                                            children: r
                                                        }, r))
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* Input */.II, {
                                                    value: c.content,
                                                    type: "text",
                                                    className: (chat_module_default())["context-content"],
                                                    rows: 1,
                                                    onInput: (e)=>updateContextPrompt(i, {
                                                            ...c,
                                                            content: e.currentTarget.value
                                                        })
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                                    icon: /*#__PURE__*/ jsx_runtime_.jsx(icons_delete/* default */.Z, {}),
                                                    className: (chat_module_default())["context-delete-button"],
                                                    onClick: ()=>removeContextPrompt(i),
                                                    bordered: true
                                                })
                                            ]
                                        }, i)),
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: (chat_module_default())["context-prompt-row"],
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                            icon: /*#__PURE__*/ jsx_runtime_.jsx(add/* default */.Z, {}),
                                            text: locales/* default.Context.Add */.ZP.Context.Add,
                                            bordered: true,
                                            className: (chat_module_default())["context-prompt-button"],
                                            onClick: ()=>addContextPrompt({
                                                    role: "system",
                                                    content: "",
                                                    date: ""
                                                })
                                        })
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: (chat_module_default())["memory-prompt"],
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                        className: (chat_module_default())["memory-prompt-title"],
                                        children: [
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("span", {
                                                children: [
                                                    locales/* default.Memory.Title */.ZP.Memory.Title,
                                                    " (",
                                                    session.lastSummarizeIndex,
                                                    " of",
                                                    " ",
                                                    session.messages.length,
                                                    ")"
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                                className: (chat_module_default())["memory-prompt-action"],
                                                children: [
                                                    locales/* default.Memory.Send */.ZP.Memory.Send,
                                                    /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                        type: "checkbox",
                                                        checked: session.sendMemory,
                                                        onChange: ()=>chatStore.updateCurrentSession((session)=>session.sendMemory = !session.sendMemory)
                                                    })
                                                ]
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: (chat_module_default())["memory-prompt-content"],
                                        children: session.memoryPrompt || locales/* default.Memory.EmptyContent */.ZP.Memory.EmptyContent
                                    })
                                ]
                            })
                        ]
                    })
                })
            })
        ]
    }, "prompt-toast");
}
function useSubmitHandler() {
    const config = (0,store/* useChatStore */.aK)((state)=>state.config);
    const submitKey = config.submitKey;
    const shouldSubmit = (e)=>{
        if (e.key !== "Enter") return false;
        if (e.key === "Enter" && e.nativeEvent.isComposing) return false;
        return config.submitKey === store/* SubmitKey.AltEnter */.mQ.AltEnter && e.altKey || config.submitKey === store/* SubmitKey.CtrlEnter */.mQ.CtrlEnter && e.ctrlKey || config.submitKey === store/* SubmitKey.ShiftEnter */.mQ.ShiftEnter && e.shiftKey || config.submitKey === store/* SubmitKey.MetaEnter */.mQ.MetaEnter && e.metaKey || config.submitKey === store/* SubmitKey.Enter */.mQ.Enter && !e.altKey && !e.ctrlKey && !e.shiftKey && !e.metaKey;
    };
    return {
        submitKey,
        shouldSubmit
    };
}
function PromptHints(props) {
    if (props.prompts.length === 0) return null;
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: (home_module_default())["prompt-hints"],
        children: props.prompts.map((prompt1, i)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: (home_module_default())["prompt-hint"],
                onClick: ()=>props.onPromptSelect(prompt1),
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: (home_module_default())["hint-title"],
                        children: prompt1.title
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: (home_module_default())["hint-content"],
                        children: prompt1.content
                    })
                ]
            }, prompt1.title + i.toString()))
    });
}
function useScrollToBottom() {
    // for auto-scroll
    const scrollRef = (0,react_.useRef)(null);
    const [autoScroll, setAutoScroll] = (0,react_.useState)(true);
    // auto scroll
    (0,react_.useLayoutEffect)(()=>{
        const dom = scrollRef.current;
        if (dom && autoScroll) {
            setTimeout(()=>dom.scrollTop = dom.scrollHeight, 1);
        }
    });
    return {
        scrollRef,
        autoScroll,
        setAutoScroll
    };
}
function Chat(props) {
    const chatStore = (0,store/* useChatStore */.aK)();
    const [session, sessionIndex] = (0,store/* useChatStore */.aK)((state)=>[
            state.currentSession(),
            state.currentSessionIndex
        ]);
    const fontSize = (0,store/* useChatStore */.aK)((state)=>state.config.fontSize);
    const inputRef = (0,react_.useRef)(null);
    const [userInput, setUserInput] = (0,react_.useState)("");
    const [beforeInput, setBeforeInput] = (0,react_.useState)("");
    const [isLoading, setIsLoading] = (0,react_.useState)(false);
    const { submitKey , shouldSubmit  } = useSubmitHandler();
    const { scrollRef , setAutoScroll  } = useScrollToBottom();
    const [hitBottom, setHitBottom] = (0,react_.useState)(false);
    const onChatBodyScroll = (e)=>{
        const isTouchBottom = e.scrollTop + e.clientHeight >= e.scrollHeight - 20;
        setHitBottom(isTouchBottom);
    };
    // prompt hints
    const promptStore = (0,store_prompt/* usePromptStore */.f5)();
    const [promptHints, setPromptHints] = (0,react_.useState)([]);
    const onSearch = (0,index_module/* useDebouncedCallback */.y1)((text)=>{
        setPromptHints(promptStore.search(text));
    }, 100, {
        leading: true,
        trailing: true
    });
    const onPromptSelect = (prompt1)=>{
        setUserInput(prompt1.content);
        setPromptHints([]);
        inputRef.current?.focus();
    };
    const scrollInput = ()=>{
        const dom = inputRef.current;
        if (!dom) return;
        const paddingBottomNum = parseInt(window.getComputedStyle(dom).paddingBottom, 10);
        dom.scrollTop = dom.scrollHeight - dom.offsetHeight + paddingBottomNum;
    };
    // auto grow input
    const [inputRows, setInputRows] = (0,react_.useState)(2);
    const measure = (0,index_module/* useDebouncedCallback */.y1)(()=>{
        const rows = inputRef.current ? (0,utils/* autoGrowTextArea */.lx)(inputRef.current) : 1;
        const inputRows = Math.min(5, Math.max(2 + Number(!(0,utils/* isMobileScreen */.Av)()), rows));
        setInputRows(inputRows);
    }, 100, {
        leading: true,
        trailing: true
    });
    // eslint-disable-next-line react-hooks/exhaustive-deps
    (0,react_.useEffect)(measure, [
        userInput
    ]);
    // only search prompts when user input is short
    const SEARCH_TEXT_LIMIT = 30;
    const onInput = (text)=>{
        scrollInput();
        setUserInput(text);
        const n = text.trim().length;
        // clear search results
        if (n === 0) {
            setPromptHints([]);
        } else if (!chatStore.config.disablePromptHint && n < SEARCH_TEXT_LIMIT) {
            // check if need to trigger auto completion
            if (text.startsWith("/")) {
                let searchText = text.slice(1);
                onSearch(searchText);
            }
        }
    };
    // submit user input
    const onUserSubmit = ()=>{
        if (userInput.length <= 0) return;
        setIsLoading(true);
        chatStore.onUserInput(userInput).then(()=>setIsLoading(false));
        setBeforeInput(userInput);
        setUserInput("");
        setPromptHints([]);
        if (!(0,utils/* isMobileScreen */.Av)()) inputRef.current?.focus();
        setAutoScroll(true);
    };
    // stop response
    const onUserStop = (messageId)=>{
        requests/* ControllerPool.stop */.u4.stop(sessionIndex, messageId);
    };
    // check if should send message
    const onInputKeyDown = (e)=>{
        // if ArrowUp and no userInput
        if (e.key === "ArrowUp" && userInput.length <= 0) {
            setUserInput(beforeInput);
            e.preventDefault();
            return;
        }
        if (shouldSubmit(e)) {
            onUserSubmit();
            e.preventDefault();
        }
    };
    const onRightClick = (e, message)=>{
        // auto fill user input
        if (message.role === "user") {
            setUserInput(message.content);
        }
        // copy to clipboard
        if ((0,utils/* selectOrCopy */.Ri)(e.currentTarget, message.content)) {
            e.preventDefault();
        }
    };
    const onResend = (botIndex)=>{
        // find last user input message and resend
        for(let i = botIndex; i >= 0; i -= 1){
            if (messages[i].role === "user") {
                setIsLoading(true);
                chatStore.onUserInput(messages[i].content).then(()=>setIsLoading(false));
                chatStore.updateCurrentSession((session)=>session.messages.splice(i, 2));
                inputRef.current?.focus();
                return;
            }
        }
    };
    const config = (0,store/* useChatStore */.aK)((state)=>state.config);
    const context = session.context.slice();
    if (context.length === 0 && session.messages.at(0)?.content !== store/* BOT_HELLO.content */.ux.content) {
        context.push(store/* BOT_HELLO */.ux);
    }
    // preview messages
    const messages = context.concat(session.messages).concat(isLoading ? [
        {
            ...(0,store/* createMessage */.tn)({
                role: "assistant",
                content: "……"
            }),
            preview: true
        }
    ] : []).concat(userInput.length > 0 && config.sendPreviewBubble ? [
        {
            ...(0,store/* createMessage */.tn)({
                role: "user",
                content: userInput
            }),
            preview: true
        }
    ] : []);
    const [showPromptModal, setShowPromptModal] = (0,react_.useState)(false);
    // Auto focus
    (0,react_.useEffect)(()=>{
        if (props.sideBarShowing && (0,utils/* isMobileScreen */.Av)()) return;
        inputRef.current?.focus();
    // eslint-disable-next-line react-hooks/exhaustive-deps
    }, []);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: (home_module_default()).chat,
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: (home_module_default())["window-header"],
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: (home_module_default())["window-header-title"],
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                className: `${(home_module_default())["window-header-main-title"]} ${(home_module_default())["chat-body-title"]}`,
                                onClickCapture: ()=>{
                                    const newTopic = prompt(locales/* default.Chat.Rename */.ZP.Chat.Rename, session.topic);
                                    if (newTopic && newTopic !== session.topic) {
                                        chatStore.updateCurrentSession((session)=>session.topic = newTopic);
                                    }
                                },
                                children: session.topic
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                className: (home_module_default())["window-header-sub-title"],
                                children: locales/* default.Chat.SubTitle */.ZP.Chat.SubTitle(session.messages.length)
                            })
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: (home_module_default())["window-actions"],
                        children: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                            className: (home_module_default())["window-action-button"] + " " + (home_module_default()).mobile,
                            children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                icon: /*#__PURE__*/ jsx_runtime_.jsx(icons_return, {}),
                                bordered: true,
                                title: locales/* default.Chat.Actions.ChatList */.ZP.Chat.Actions.ChatList,
                                onClick: props?.showSideBar
                            })
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(PromptToast, {
                        showToast: !hitBottom,
                        showModal: showPromptModal,
                        setShowModal: setShowPromptModal
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: (home_module_default())["chat-body"],
                ref: scrollRef,
                onScroll: (e)=>onChatBodyScroll(e.currentTarget),
                onWheel: (e)=>setAutoScroll(hitBottom && e.deltaY > 0),
                onTouchStart: ()=>{
                    inputRef.current?.blur();
                    setAutoScroll(false);
                },
                children: messages.map((message, i)=>{
                    const isUser = message.role === "user";
                    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: isUser ? (home_module_default())["chat-message-user"] : (home_module_default())["chat-message"],
                        children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: (home_module_default())["chat-message-container"],
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                    className: (home_module_default())["chat-message-avatar"],
                                    children: /*#__PURE__*/ jsx_runtime_.jsx(Avatar, {
                                        role: message.role
                                    })
                                }),
                                (message.preview || message.streaming) && /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                    className: (home_module_default())["chat-message-status"],
                                    children: locales/* default.Chat.Typing */.ZP.Chat.Typing
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    className: (home_module_default())["chat-message-item"],
                                    children: [
                                        !isUser && !(message.preview || message.content.length === 0) && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            className: (home_module_default())["chat-message-top-actions"],
                                            children: [
                                                message.streaming ? /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                    className: (home_module_default())["chat-message-top-action"],
                                                    onClick: ()=>onUserStop(message.id ?? i),
                                                    children: locales/* default.Chat.Actions.Stop */.ZP.Chat.Actions.Stop
                                                }) : /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                    className: (home_module_default())["chat-message-top-action"],
                                                    onClick: ()=>onResend(i)
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                    className: (home_module_default())["chat-message-top-action"],
                                                    onClick: ()=>(0,utils/* copyToClipboard */.vQ)(message.content)
                                                })
                                            ]
                                        }),
                                        (message.preview || message.content.length === 0) && !isUser ? /*#__PURE__*/ jsx_runtime_.jsx(three_dots/* default */.Z, {}) : /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                            className: "markdown-body",
                                            style: {
                                                fontSize: `${fontSize}px`
                                            },
                                            onContextMenu: (e)=>onRightClick(e, message),
                                            onDoubleClickCapture: ()=>{
                                                if (!(0,utils/* isMobileScreen */.Av)()) return;
                                                setUserInput(message.content);
                                            },
                                            children: /*#__PURE__*/ jsx_runtime_.jsx(Markdown, {
                                                content: message.content
                                            })
                                        })
                                    ]
                                }),
                                !isUser && !message.preview && /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                    className: (home_module_default())["chat-message-actions"],
                                    children: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: (home_module_default())["chat-message-action-date"],
                                        children: message.date.toLocaleString()
                                    })
                                })
                            ]
                        })
                    }, i);
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: (home_module_default())["chat-input-panel"],
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(PromptHints, {
                        prompts: promptHints,
                        onPromptSelect: onPromptSelect
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: (home_module_default())["chat-input-panel-inner"],
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("textarea", {
                                ref: inputRef,
                                className: (home_module_default())["chat-input"],
                                placeholder: locales/* default.Chat.Input */.ZP.Chat.Input(submitKey),
                                onInput: (e)=>onInput(e.currentTarget.value),
                                value: userInput,
                                onKeyDown: onInputKeyDown,
                                onFocus: ()=>setAutoScroll(true),
                                onBlur: ()=>{
                                    setAutoScroll(false);
                                    setTimeout(()=>setPromptHints([]), 500);
                                },
                                autoFocus: !props?.sideBarShowing,
                                rows: inputRows
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                icon: /*#__PURE__*/ jsx_runtime_.jsx(send_white, {}),
                                text: locales/* default.Chat.Send */.ZP.Chat.Send,
                                className: (home_module_default())["chat-input-send"],
                                noDark: true,
                                onClick: onUserSubmit
                            })
                        ]
                    })
                ]
            })
        ]
    }, session.id);
}


/***/ }),

/***/ 6667:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "S": () => (/* binding */ ErrorBoundary)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(6786);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(8038);
var react_default = /*#__PURE__*/__webpack_require__.n(react_);
// EXTERNAL MODULE: ./app/components/button.tsx
var components_button = __webpack_require__(45);
;// CONCATENATED MODULE: ./app/icons/github.svg
var _defs, _mask;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgGithub = function SvgGithub(props) {
  return /*#__PURE__*/react_.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), _defs || (_defs = /*#__PURE__*/react_.createElement("defs", null, /*#__PURE__*/react_.createElement("path", {
    id: "github_svg__a",
    d: "M0 0h16v16H0z"
  }))), /*#__PURE__*/react_.createElement("g", null, _mask || (_mask = /*#__PURE__*/react_.createElement("mask", {
    id: "github_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react_.createElement("use", {
    xlinkHref: "#github_svg__a"
  }))), /*#__PURE__*/react_.createElement("g", {
    mask: "url(#github_svg__b)"
  }, /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(2.667 1.645)",
    d: "M7.11 8.51c.81-.16 1.53-.45 2.1-.87.96-.73 1.46-1.85 1.46-2.95 0-.78-.3-1.5-.81-2.11-.28-.34.55-2.89-.19-2.55-.73.34-1.81 1.1-2.38.94C6.68.79 6.02.69 5.33.69c-.6 0-1.17.07-1.71.21-.79.2-1.53-.54-2.29-.87C.58-.29.99 2.34.77 2.62.28 3.22 0 3.93 0 4.69c0 1.1.6 2.22 1.56 2.95.65.48 1.45.78 2.35.94"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(6 10.22)",
    d: "M.58 0C.19.43 0 .83 0 1.21v2.91"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(9.782 10.159)",
    d: "M0 0c.37.48.55.91.55 1.29v2.89"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(2 10.405)",
    d: "M0 0c.3.04.52.17.67.41C.88.77 1.69 2.1 2.61 2.1H4"
  }))));
};
/* harmony default export */ const github = (SvgGithub);
// EXTERNAL MODULE: ./app/constant.ts
var constant = __webpack_require__(6685);
;// CONCATENATED MODULE: ./app/components/error.tsx





class ErrorBoundary extends (react_default()).Component {
    constructor(props){
        super(props);
        this.state = {
            hasError: false,
            error: null,
            info: null
        };
    }
    componentDidCatch(error, info) {
        // Update state with error details
        this.setState({
            hasError: true,
            error,
            info
        });
    }
    render() {
        if (this.state.hasError) {
            // Render error message
            return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "error",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("h2", {
                        children: "Oops, something went wrong!"
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("pre", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: this.state.error?.toString()
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: this.state.info?.componentStack
                            })
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("a", {
                        href: constant/* ISSUE_URL */.TH,
                        className: "report",
                        children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                            text: "Report This Error",
                            icon: /*#__PURE__*/ jsx_runtime_.jsx(github, {}),
                            bordered: true
                        })
                    })
                ]
            });
        }
        // if no error occurred, render children
        return this.props.children;
    }
}


/***/ }),

/***/ 7080:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Home": () => (/* binding */ Home),
  "Loading": () => (/* binding */ Loading)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(6786);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(8038);
// EXTERNAL MODULE: ./app/components/button.tsx
var components_button = __webpack_require__(45);
// EXTERNAL MODULE: ./app/components/home.module.scss
var home_module = __webpack_require__(7986);
var home_module_default = /*#__PURE__*/__webpack_require__.n(home_module);
;// CONCATENATED MODULE: ./app/icons/settings.svg
var _defs, _mask;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgSettings = function SvgSettings(props) {
  return /*#__PURE__*/react_.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), _defs || (_defs = /*#__PURE__*/react_.createElement("defs", null, /*#__PURE__*/react_.createElement("path", {
    id: "settings_svg__a",
    d: "M0 0h16v16H0z"
  }))), /*#__PURE__*/react_.createElement("g", null, _mask || (_mask = /*#__PURE__*/react_.createElement("mask", {
    id: "settings_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react_.createElement("use", {
    xlinkHref: "#settings_svg__a"
  }))), /*#__PURE__*/react_.createElement("g", {
    mask: "url(#settings_svg__b)"
  }, /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(1.333 2.333)",
    d: "M13.33 5.67 10 0H3.33L0 5.67l3.33 5.66H10l3.33-5.66Z"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    transform: "translate(6.333 6.333)",
    d: "M3.33 1.67C3.33.75 2.59 0 1.67 0 .75 0 0 .75 0 1.67c0 .92.75 1.66 1.67 1.66.92 0 1.66-.74 1.66-1.66Z"
  }))));
};
/* harmony default export */ const settings = (SvgSettings);
;// CONCATENATED MODULE: ./app/icons/chatgpt.svg
var chatgpt_defs, chatgpt_mask;
function chatgpt_extends() { chatgpt_extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return chatgpt_extends.apply(this, arguments); }

var SvgChatgpt = function SvgChatgpt(props) {
  return /*#__PURE__*/react_.createElement("svg", chatgpt_extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 43,
    height: 44,
    fill: "none"
  }, props), chatgpt_defs || (chatgpt_defs = /*#__PURE__*/react_.createElement("defs", null, /*#__PURE__*/react_.createElement("path", {
    id: "chatgpt_svg__a",
    d: "M0 0h43v43.58H0z"
  }))), /*#__PURE__*/react_.createElement("g", null, chatgpt_mask || (chatgpt_mask = /*#__PURE__*/react_.createElement("mask", {
    id: "chatgpt_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react_.createElement("use", {
    xlinkHref: "#chatgpt_svg__a"
  }))), /*#__PURE__*/react_.createElement("g", {
    mask: "url(#chatgpt_svg__b)"
  }, /*#__PURE__*/react_.createElement("path", {
    fillRule: "evenodd",
    style: {
      fill: "#8bcae0"
    },
    opacity: 0.27,
    d: "M40.17 17.84c.36-1.11.55-2.27.55-3.43 0-1.93-.51-3.83-1.49-5.49a10.98 10.98 0 0 0-9.52-5.51c-.77 0-1.55.08-2.3.24A10.868 10.868 0 0 0 19.29 0h-.1c-4.76 0-8.98 3.07-10.45 7.6-3.06.63-5.71 2.55-7.26 5.27a10.993 10.993 0 0 0 1.35 12.87c-.36 1.11-.55 2.27-.55 3.43 0 1.93.51 3.83 1.49 5.49a10.97 10.97 0 0 0 11.82 5.27c2.06 2.32 5.02 3.65 8.12 3.65h.1c4.76 0 8.99-3.07 10.45-7.61a10.82 10.82 0 0 0 7.26-5.26 10.995 10.995 0 0 0-1.35-12.87ZM18.817 38.695c-.09.05-.17.1-.26.15a8.145 8.145 0 0 0 5.22 1.89h.01c4.5-.01 8.15-3.67 8.16-8.17v-10.13a.153.153 0 0 0-.07-.1l-3.67-2.12v12.24c0 .51-.27.98-.72 1.23l-8.67 5.01Zm-1.424-2.472 8.77-5.06c.04-.03.06-.07.06-.11h-.01v-4.24l-10.59 6.12c-.44.25-.98.25-1.42 0l-8.68-5.01c-.08-.05-.2-.12-.26-.16a8.19 8.19 0 0 0 .97 5.47 8.18 8.18 0 0 0 7.08 4.08c1.43 0 2.84-.37 4.08-1.09Zm-9.187-25.21v-.3c-1.79.66-3.3 1.93-4.25 3.58a8.226 8.226 0 0 0-1.09 4.08c0 2.92 1.55 5.61 4.08 7.07l8.77 5.07c.04.02.09.02.12-.01l3.67-2.12-10.59-6.11c-.44-.25-.71-.72-.71-1.23v-10.03Zm27.849 7.117-8.77-5.07a.126.126 0 0 0-.12.01l-3.67 2.12 10.59 6.12c.44.25.71.71.71 1.22v10.33a8.168 8.168 0 0 0 5.35-7.66 8.16 8.16 0 0 0-4.09-7.07Zm-19.22-5.718a.16.16 0 0 0-.05.11v4.24l10.59-6.12c.22-.12.47-.19.72-.19s.49.07.71.19l8.68 5.02c.08.05.17.1.25.15.08-.46.12-.92.12-1.38 0-4.51-3.66-8.17-8.17-8.17-1.43 0-2.83.38-4.08 1.09l-8.77 5.06ZM19.22 2.85c-4.51 0-8.17 3.65-8.17 8.16v10.13c.01.05.03.08.07.1l3.67 2.12.01-12.23v-.01c0-.5.27-.97.71-1.22l8.68-5.01c.07-.05.19-.11.25-.15a8.145 8.145 0 0 0-5.22-1.89ZM16.783 24.51l4.72 2.73 4.72-2.73v-5.45l-4.72-2.72-4.72 2.73v5.44Z"
  }))));
};
/* harmony default export */ const chatgpt = (SvgChatgpt);
// EXTERNAL MODULE: ./app/icons/bot.svg
var bot = __webpack_require__(3106);
// EXTERNAL MODULE: ./app/icons/add.svg
var add = __webpack_require__(1935);
// EXTERNAL MODULE: ./app/icons/three-dots.svg
var three_dots = __webpack_require__(3076);
// EXTERNAL MODULE: ./app/icons/close.svg
var icons_close = __webpack_require__(4299);
// EXTERNAL MODULE: ./app/store/index.ts + 2 modules
var store = __webpack_require__(6388);
// EXTERNAL MODULE: ./app/utils.ts
var utils = __webpack_require__(172);
// EXTERNAL MODULE: ./app/locales/index.ts + 5 modules
var locales = __webpack_require__(4708);
// EXTERNAL MODULE: ./app/components/chat.tsx + 4 modules
var chat = __webpack_require__(101);
// EXTERNAL MODULE: ./node_modules/next/dist/shared/lib/app-dynamic.js
var app_dynamic = __webpack_require__(6101);
var app_dynamic_default = /*#__PURE__*/__webpack_require__.n(app_dynamic);
// EXTERNAL MODULE: ./app/components/error.tsx + 1 modules
var error = __webpack_require__(6667);
;// CONCATENATED MODULE: ./app/components/home.tsx

__webpack_require__(25);















function Loading(props) {
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: (home_module_default())["loading-content"],
        children: [
            !props.noLogo && /*#__PURE__*/ jsx_runtime_.jsx(bot/* default */.Z, {}),
            /*#__PURE__*/ jsx_runtime_.jsx(three_dots/* default */.Z, {})
        ]
    });
}
const Settings = app_dynamic_default()(async ()=>(await Promise.all(/* import() */[__webpack_require__.e(480), __webpack_require__.e(503)]).then(__webpack_require__.bind(__webpack_require__, 8503))).Settings, {
    loadableGenerated: {
        modules: [
            "/Users/shuai.yang1/myself/ChatGPT-Next-Web/app/components/home.tsx -> " + "./settings"
        ]
    },
    loading: ()=>/*#__PURE__*/ jsx_runtime_.jsx(Loading, {
            noLogo: true
        })
});
const ChatList = app_dynamic_default()(async ()=>(await Promise.all(/* import() */[__webpack_require__.e(423), __webpack_require__.e(11)]).then(__webpack_require__.bind(__webpack_require__, 1011))).ChatList, {
    loadableGenerated: {
        modules: [
            "/Users/shuai.yang1/myself/ChatGPT-Next-Web/app/components/home.tsx -> " + "./chat-list"
        ]
    },
    loading: ()=>/*#__PURE__*/ jsx_runtime_.jsx(Loading, {
            noLogo: true
        })
});
function useSwitchTheme() {
    const config = (0,store/* useChatStore */.aK)((state)=>state.config);
    (0,react_.useEffect)(()=>{
        document.body.classList.remove("light");
        document.body.classList.remove("dark");
        if (config.theme === "dark") {
            document.body.classList.add("dark");
        } else if (config.theme === "light") {
            document.body.classList.add("light");
        }
        const metaDescriptionDark = document.querySelector('meta[name="theme-color"][media]');
        const metaDescriptionLight = document.querySelector('meta[name="theme-color"]:not([media])');
        if (config.theme === "auto") {
            metaDescriptionDark?.setAttribute("content", "#151515");
            metaDescriptionLight?.setAttribute("content", "#fafafa");
        } else {
            const themeColor = getComputedStyle(document.body).getPropertyValue("--theme-color").trim();
            metaDescriptionDark?.setAttribute("content", themeColor);
            metaDescriptionLight?.setAttribute("content", themeColor);
        }
    }, [
        config.theme
    ]);
}
const useHasHydrated = ()=>{
    const [hasHydrated, setHasHydrated] = (0,react_.useState)(false);
    (0,react_.useEffect)(()=>{
        setHasHydrated(true);
    }, []);
    return hasHydrated;
};
function _Home() {
    const [createNewSession, currentIndex, removeSession] = (0,store/* useChatStore */.aK)((state)=>[
            state.newSession,
            state.currentSessionIndex,
            state.removeSession
        ]);
    const chatStore = (0,store/* useChatStore */.aK)();
    const loading = !useHasHydrated();
    const [showSideBar, setShowSideBar] = (0,react_.useState)(true);
    // setting
    const [openSettings, setOpenSettings] = (0,react_.useState)(false);
    const config = (0,store/* useChatStore */.aK)((state)=>state.config);
    useSwitchTheme();
    if (loading) {
        return /*#__PURE__*/ jsx_runtime_.jsx(Loading, {});
    }
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: `${config.tightBorder && !(0,utils/* isMobileScreen */.Av)() ? (home_module_default())["tight-container"] : (home_module_default()).container}`,
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: (home_module_default()).sidebar + ` ${showSideBar && (home_module_default())["sidebar-show"]}`,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: (home_module_default())["sidebar-header"],
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                className: (home_module_default())["sidebar-title"],
                                children: "AI Assistant"
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                className: (home_module_default())["sidebar-sub-title"],
                                children: "Build your own AI assistant."
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                className: (home_module_default())["sidebar-logo"],
                                children: /*#__PURE__*/ jsx_runtime_.jsx(chatgpt, {})
                            })
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: (home_module_default())["sidebar-body"],
                        onClick: ()=>{
                            setOpenSettings(false);
                            setShowSideBar(false);
                        },
                        children: /*#__PURE__*/ jsx_runtime_.jsx(ChatList, {})
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: (home_module_default())["sidebar-tail"],
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: (home_module_default())["sidebar-actions"],
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: (home_module_default())["sidebar-action"] + " " + (home_module_default()).mobile,
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                            icon: /*#__PURE__*/ jsx_runtime_.jsx(icons_close/* default */.Z, {}),
                                            onClick: chatStore.deleteSession
                                        })
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: (home_module_default())["sidebar-action"],
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                            icon: /*#__PURE__*/ jsx_runtime_.jsx(settings, {}),
                                            onClick: ()=>{
                                                setOpenSettings(true);
                                                setShowSideBar(false);
                                            },
                                            shadow: true
                                        })
                                    })
                                ]
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                    icon: /*#__PURE__*/ jsx_runtime_.jsx(add/* default */.Z, {}),
                                    text: locales/* default.Home.NewChat */.ZP.Home.NewChat,
                                    onClick: ()=>{
                                        createNewSession();
                                        setShowSideBar(false);
                                    },
                                    shadow: true
                                })
                            })
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: (home_module_default())["window-content"],
                children: openSettings ? /*#__PURE__*/ jsx_runtime_.jsx(Settings, {
                    closeSettings: ()=>{
                        setOpenSettings(false);
                        setShowSideBar(true);
                    }
                }) : /*#__PURE__*/ jsx_runtime_.jsx(chat/* Chat */.en, {
                    showSideBar: ()=>setShowSideBar(true),
                    sideBarShowing: showSideBar
                }, "chat")
            })
        ]
    });
}
function Home() {
    return /*#__PURE__*/ jsx_runtime_.jsx(error/* ErrorBoundary */.S, {
        children: /*#__PURE__*/ jsx_runtime_.jsx(_Home, {})
    });
}


/***/ }),

/***/ 198:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "II": () => (/* binding */ Input),
  "aV": () => (/* binding */ List),
  "HC": () => (/* binding */ ListItem),
  "u_": () => (/* binding */ Modal),
  "J2": () => (/* binding */ Popover),
  "CF": () => (/* binding */ showToast)
});

// UNUSED EXPORTS: Card, Loading, Toast, showModal

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(6786);
// EXTERNAL MODULE: ./app/components/ui-lib.module.scss
var ui_lib_module = __webpack_require__(3304);
var ui_lib_module_default = /*#__PURE__*/__webpack_require__.n(ui_lib_module);
// EXTERNAL MODULE: ./app/icons/three-dots.svg
var three_dots = __webpack_require__(3076);
// EXTERNAL MODULE: ./app/icons/close.svg
var icons_close = __webpack_require__(4299);
;// CONCATENATED MODULE: external "next/dist/compiled/react-dom/client"
const client_namespaceObject = require("next/dist/compiled/react-dom/client");
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(8038);
;// CONCATENATED MODULE: ./app/components/ui-lib.tsx






function Popover(props) {
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: (ui_lib_module_default()).popover,
        children: [
            props.children,
            props.open && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: (ui_lib_module_default())["popover-content"],
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: (ui_lib_module_default())["popover-mask"],
                        onClick: props.onClose
                    }),
                    props.content
                ]
            })
        ]
    });
}
function Card(props) {
    return /*#__PURE__*/ _jsx("div", {
        className: styles.card + " " + props.className,
        children: props.children
    });
}
function ListItem(props) {
    if (props.children.length > 2) {
        throw Error("Only Support Two Children");
    }
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: (ui_lib_module_default())["list-item"],
        children: props.children
    });
}
function List(props) {
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: (ui_lib_module_default()).list,
        children: props.children
    });
}
function Loading() {
    return /*#__PURE__*/ _jsx("div", {
        style: {
            height: "100vh",
            width: "100vw",
            display: "flex",
            alignItems: "center",
            justifyContent: "center"
        },
        children: /*#__PURE__*/ _jsx(LoadingIcon, {})
    });
}
function Modal(props) {
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: (ui_lib_module_default())["modal-container"],
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: (ui_lib_module_default())["modal-header"],
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: (ui_lib_module_default())["modal-title"],
                        children: props.title
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: (ui_lib_module_default())["modal-close-btn"],
                        onClick: props.onClose,
                        children: /*#__PURE__*/ jsx_runtime_.jsx(icons_close/* default */.Z, {})
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: (ui_lib_module_default())["modal-content"],
                children: props.children
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: (ui_lib_module_default())["modal-footer"],
                children: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                    className: (ui_lib_module_default())["modal-actions"],
                    children: props.actions?.map((action, i)=>/*#__PURE__*/ jsx_runtime_.jsx("div", {
                            className: (ui_lib_module_default())["modal-action"],
                            children: action
                        }, i))
                })
            })
        ]
    });
}
function showModal(props) {
    const div = document.createElement("div");
    div.className = "modal-mask";
    document.body.appendChild(div);
    const root = createRoot(div);
    const closeModal = ()=>{
        props.onClose?.();
        root.unmount();
        div.remove();
    };
    div.onclick = (e)=>{
        if (e.target === div) {
            closeModal();
        }
    };
    root.render(/*#__PURE__*/ _jsx(Modal, {
        ...props,
        onClose: closeModal
    }));
}
function Toast(props) {
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: (ui_lib_module_default())["toast-container"],
        children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
            className: (ui_lib_module_default())["toast-content"],
            children: [
                /*#__PURE__*/ jsx_runtime_.jsx("span", {
                    children: props.content
                }),
                props.action && /*#__PURE__*/ jsx_runtime_.jsx("button", {
                    onClick: props.action.onClick,
                    className: (ui_lib_module_default())["toast-action"],
                    children: props.action.text
                })
            ]
        })
    });
}
function showToast(content, action, delay = 3000) {
    const div = document.createElement("div");
    div.className = (ui_lib_module_default()).show;
    document.body.appendChild(div);
    const root = (0,client_namespaceObject.createRoot)(div);
    const close = ()=>{
        div.classList.add((ui_lib_module_default()).hide);
        setTimeout(()=>{
            root.unmount();
            div.remove();
        }, 300);
    };
    setTimeout(()=>{
        close();
    }, delay);
    root.render(/*#__PURE__*/ jsx_runtime_.jsx(Toast, {
        content: content,
        action: action
    }));
}
function Input(props) {
    return /*#__PURE__*/ jsx_runtime_.jsx("textarea", {
        ...props,
        className: `${(ui_lib_module_default()).input} ${props.className}`
    });
}


/***/ }),

/***/ 6685:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TE": () => (/* binding */ FETCH_COMMIT_URL),
/* harmony export */   "TH": () => (/* binding */ ISSUE_URL)
/* harmony export */ });
/* unused harmony exports OWNER, REPO, REPO_URL, UPDATE_URL, FETCH_TAG_URL */
const OWNER = "Yidadaa";
const REPO = "ChatGPT-Next-Web";
const REPO_URL = `https://github.com/${OWNER}/${REPO}`;
const ISSUE_URL = `https://github.com/${OWNER}/${REPO}/issues`;
const UPDATE_URL = `${REPO_URL}#keep-updated`;
const FETCH_COMMIT_URL = `https://api.github.com/repos/${OWNER}/${REPO}/commits?per_page=1`;
const FETCH_TAG_URL = `https://api.github.com/repos/${OWNER}/${REPO}/tags?per_page=1`;


/***/ }),

/***/ 4708:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "DC": () => (/* binding */ AllLangs),
  "t4": () => (/* binding */ changeLang),
  "ZP": () => (/* binding */ locales),
  "VQ": () => (/* binding */ getLang)
});

// EXTERNAL MODULE: ./app/store/app.ts
var app = __webpack_require__(2361);
;// CONCATENATED MODULE: ./app/locales/cn.ts

const cn = {
    WIP: "该功能仍在开发中……",
    Error: {
        Unauthorized: "现在是未授权状态，请在设置页输入访问密码。"
    },
    ChatItem: {
        ChatItemCount: (count)=>`${count} 条对话`
    },
    Chat: {
        SubTitle: (count)=>`与 ChatGPT 的 ${count} 条对话`,
        Actions: {
            ChatList: "查看消息列表",
            CompressedHistory: "查看压缩后的历史 Prompt",
            Export: "导出聊天记录",
            Copy: "复制",
            Stop: "停止",
            Retry: "重试"
        },
        Rename: "重命名对话",
        Typing: "正在输入…",
        Input: (submitKey)=>{
            var inputHints = `${submitKey} 发送`;
            if (submitKey === String(app/* SubmitKey.Enter */.mQ.Enter)) {
                inputHints += "，Shift + Enter 换行";
            }
            return inputHints + "，/ 触发补全";
        },
        Send: "发送"
    },
    Export: {
        Title: "导出聊天记录为 Markdown",
        Copy: "全部复制",
        Download: "下载文件",
        MessageFromYou: "来自你的消息",
        MessageFromChatGPT: "来自 ChatGPT 的消息"
    },
    Memory: {
        Title: "历史记忆",
        EmptyContent: "尚未记忆",
        Send: "发送记忆",
        Copy: "复制记忆",
        Reset: "重置对话",
        ResetConfirm: "重置后将清空当前对话记录以及历史记忆，确认重置？"
    },
    Home: {
        NewChat: "新的聊天",
        DeleteChat: "确认删除选中的对话？",
        DeleteToast: "已删除会话",
        Revert: "撤销"
    },
    Settings: {
        Title: "设置",
        SubTitle: "设置选项",
        Actions: {
            ClearAll: "清除所有数据",
            ResetAll: "重置所有选项",
            Close: "关闭"
        },
        Lang: {
            Name: "Language",
            Options: {
                cn: "简体中文",
                en: "English",
                tw: "繁體中文",
                es: "Espa\xf1ol",
                it: "Italiano"
            }
        },
        Avatar: "头像",
        FontSize: {
            Title: "字体大小",
            SubTitle: "聊天内容的字体大小"
        },
        Update: {
            Version: (x)=>`当前版本：${x}`,
            IsLatest: "已是最新版本",
            CheckUpdate: "检查更新",
            IsChecking: "正在检查更新...",
            FoundUpdate: (x)=>`发现新版本：${x}`,
            GoToUpdate: "前往更新"
        },
        SendKey: "发送键",
        Theme: "主题",
        TightBorder: "紧凑边框",
        SendPreviewBubble: "发送预览气泡",
        Prompt: {
            Disable: {
                Title: "禁用提示词自动补全",
                SubTitle: "在输入框开头输入 / 即可触发自动补全"
            },
            List: "自定义提示词列表",
            ListCount: (builtin, custom)=>`内置 ${builtin} 条，用户定义 ${custom} 条`,
            Edit: "编辑"
        },
        HistoryCount: {
            Title: "附带历史消息数",
            SubTitle: "每次请求携带的历史消息数"
        },
        CompressThreshold: {
            Title: "历史消息长度压缩阈值",
            SubTitle: "当未压缩的历史消息超过该值时，将进行压缩"
        },
        Token: {
            Title: "API Key",
            SubTitle: "使用自己的 Key 可绕过密码访问限制",
            Placeholder: "OpenAI API Key"
        },
        Usage: {
            Title: "余额查询",
            SubTitle (used, total) {
                return `本月已使用 $${used}，订阅总额 $${total}`;
            },
            IsChecking: "正在检查…",
            Check: "重新检查",
            NoAccess: "输入 API Key 或访问密码查看余额"
        },
        AccessCode: {
            Title: "访问密码",
            SubTitle: "现在是未授权访问状态",
            Placeholder: "请输入访问密码"
        },
        Model: "模型 (model)",
        Temperature: {
            Title: "随机性 (temperature)",
            SubTitle: "值越大，回复越随机，大于 1 的值可能会导致乱码"
        },
        MaxTokens: {
            Title: "单次回复限制 (max_tokens)",
            SubTitle: "单次交互所用的最大 Token 数"
        },
        PresencePenlty: {
            Title: "话题新鲜度 (presence_penalty)",
            SubTitle: "值越大，越有可能扩展到新话题"
        }
    },
    Store: {
        DefaultTopic: "新的聊天",
        BotHello: "有什么可以帮你的吗",
        Error: "出错了，稍后重试吧",
        Prompt: {
            History: (content)=>"这是 ai 和用户的历史聊天总结作为前情提要：" + content,
            Topic: "使用四到五个字直接返回这句话的简要主题，不要解释、不要标点、不要语气词、不要多余文本，如果没有主题，请直接返回“闲聊”",
            Summarize: "简要总结一下你和用户的对话，用作后续的上下文提示 prompt，控制在 200 字以内"
        },
        ConfirmClearAll: "确认清除所有聊天、设置数据？"
    },
    Copy: {
        Success: "已写入剪切板",
        Failed: "复制失败，请赋予剪切板权限"
    },
    Context: {
        Toast: (x)=>`已设置 ${x} 条前置上下文`,
        Edit: "前置上下文和历史记忆",
        Add: "新增一条"
    }
};
/* harmony default export */ const locales_cn = (cn);

;// CONCATENATED MODULE: ./app/locales/en.ts

const en = {
    WIP: "WIP...",
    Error: {
        Unauthorized: "Unauthorized access, please enter access code in settings page."
    },
    ChatItem: {
        ChatItemCount: (count)=>`${count} messages`
    },
    Chat: {
        SubTitle: (count)=>`${count} messages with ChatGPT`,
        Actions: {
            ChatList: "Go To Chat List",
            CompressedHistory: "Compressed History Memory Prompt",
            Export: "Export All Messages as Markdown",
            Copy: "Copy",
            Stop: "Stop",
            Retry: "Retry"
        },
        Rename: "Rename Chat",
        Typing: "Typing…",
        Input: (submitKey)=>{
            var inputHints = `${submitKey} to send`;
            if (submitKey === String(app/* SubmitKey.Enter */.mQ.Enter)) {
                inputHints += ", Shift + Enter to wrap";
            }
            return inputHints + ", / to search prompts";
        },
        Send: "Send"
    },
    Export: {
        Title: "All Messages",
        Copy: "Copy All",
        Download: "Download",
        MessageFromYou: "Message From You",
        MessageFromChatGPT: "Message From ChatGPT"
    },
    Memory: {
        Title: "Memory Prompt",
        EmptyContent: "Nothing yet.",
        Send: "Send Memory",
        Copy: "Copy Memory",
        Reset: "Reset Session",
        ResetConfirm: "Resetting will clear the current conversation history and historical memory. Are you sure you want to reset?"
    },
    Home: {
        NewChat: "New Chat",
        DeleteChat: "Confirm to delete the selected conversation?",
        DeleteToast: "Chat Deleted",
        Revert: "Revert"
    },
    Settings: {
        Title: "Settings",
        SubTitle: "All Settings",
        Actions: {
            ClearAll: "Clear All Data",
            ResetAll: "Reset All Settings",
            Close: "Close"
        },
        Lang: {
            Name: "Language",
            Options: {
                cn: "简体中文",
                en: "English",
                tw: "繁體中文",
                es: "Espa\xf1ol",
                it: "Italiano"
            }
        },
        Avatar: "Avatar",
        FontSize: {
            Title: "Font Size",
            SubTitle: "Adjust font size of chat content"
        },
        Update: {
            Version: (x)=>`Version: ${x}`,
            IsLatest: "Latest version",
            CheckUpdate: "Check Update",
            IsChecking: "Checking update...",
            FoundUpdate: (x)=>`Found new version: ${x}`,
            GoToUpdate: "Update"
        },
        SendKey: "Send Key",
        Theme: "Theme",
        TightBorder: "Tight Border",
        SendPreviewBubble: "Send Preview Bubble",
        Prompt: {
            Disable: {
                Title: "Disable auto-completion",
                SubTitle: "Input / to trigger auto-completion"
            },
            List: "Prompt List",
            ListCount: (builtin, custom)=>`${builtin} built-in, ${custom} user-defined`,
            Edit: "Edit"
        },
        HistoryCount: {
            Title: "Attached Messages Count",
            SubTitle: "Number of sent messages attached per request"
        },
        CompressThreshold: {
            Title: "History Compression Threshold",
            SubTitle: "Will compress if uncompressed messages length exceeds the value"
        },
        Token: {
            Title: "API Key",
            SubTitle: "Use your key to ignore access code limit",
            Placeholder: "OpenAI API Key"
        },
        Usage: {
            Title: "Account Balance",
            SubTitle (used, total) {
                return `Used this month $${used}, subscription $${total}`;
            },
            IsChecking: "Checking...",
            Check: "Check Again",
            NoAccess: "Enter API Key to check balance"
        },
        AccessCode: {
            Title: "Access Code",
            SubTitle: "Access control enabled",
            Placeholder: "Need Access Code"
        },
        Model: "Model",
        Temperature: {
            Title: "Temperature",
            SubTitle: "A larger value makes the more random output"
        },
        MaxTokens: {
            Title: "Max Tokens",
            SubTitle: "Maximum length of input tokens and generated tokens"
        },
        PresencePenlty: {
            Title: "Presence Penalty",
            SubTitle: "A larger value increases the likelihood to talk about new topics"
        }
    },
    Store: {
        DefaultTopic: "New Conversation",
        BotHello: "Hello! How can I assist you today?",
        Error: "Something went wrong, please try again later.",
        Prompt: {
            History: (content)=>"This is a summary of the chat history between the AI and the user as a recap: " + content,
            Topic: "Please generate a four to five word title summarizing our conversation without any lead-in, punctuation, quotation marks, periods, symbols, or additional text. Remove enclosing quotation marks.",
            Summarize: "Summarize our discussion briefly in 200 words or less to use as a prompt for future context."
        },
        ConfirmClearAll: "Confirm to clear all chat and setting data?"
    },
    Copy: {
        Success: "Copied to clipboard",
        Failed: "Copy failed, please grant permission to access clipboard"
    },
    Context: {
        Toast: (x)=>`With ${x} contextual prompts`,
        Edit: "Contextual and Memory Prompts",
        Add: "Add One"
    }
};
/* harmony default export */ const locales_en = (en);

;// CONCATENATED MODULE: ./app/locales/tw.ts

const tw = {
    WIP: "該功能仍在開發中……",
    Error: {
        Unauthorized: "目前您的狀態是未授權，請前往設定頁面輸入授權碼。"
    },
    ChatItem: {
        ChatItemCount: (count)=>`${count} 條對話`
    },
    Chat: {
        SubTitle: (count)=>`您已經與 ChatGPT 進行了 ${count} 條對話`,
        Actions: {
            ChatList: "查看消息列表",
            CompressedHistory: "查看壓縮後的歷史 Prompt",
            Export: "匯出聊天紀錄",
            Copy: "複製",
            Stop: "停止",
            Retry: "重試"
        },
        Rename: "重命名對話",
        Typing: "正在輸入…",
        Input: (submitKey)=>{
            var inputHints = `輸入訊息後，按下 ${submitKey} 鍵即可發送`;
            if (submitKey === String(app/* SubmitKey.Enter */.mQ.Enter)) {
                inputHints += "，Shift + Enter 鍵換行";
            }
            return inputHints;
        },
        Send: "發送"
    },
    Export: {
        Title: "匯出聊天記錄為 Markdown",
        Copy: "複製全部",
        Download: "下載檔案",
        MessageFromYou: "來自你的訊息",
        MessageFromChatGPT: "來自 ChatGPT 的訊息"
    },
    Memory: {
        Title: "上下文記憶 Prompt",
        EmptyContent: "尚未記憶",
        Copy: "複製全部",
        Send: "發送記憶",
        Reset: "重置對話",
        ResetConfirm: "重置後將清空當前對話記錄以及歷史記憶，確認重置？"
    },
    Home: {
        NewChat: "新的對話",
        DeleteChat: "確定要刪除選取的對話嗎？",
        DeleteToast: "已刪除對話",
        Revert: "撤銷"
    },
    Settings: {
        Title: "設定",
        SubTitle: "設定選項",
        Actions: {
            ClearAll: "清除所有數據",
            ResetAll: "重置所有設定",
            Close: "關閉"
        },
        Lang: {
            Name: "Language",
            Options: {
                cn: "简体中文",
                en: "English",
                tw: "繁體中文",
                es: "Espa\xf1ol",
                it: "Italiano"
            }
        },
        Avatar: "大頭貼",
        FontSize: {
            Title: "字型大小",
            SubTitle: "聊天內容的字型大小"
        },
        Update: {
            Version: (x)=>`當前版本：${x}`,
            IsLatest: "已是最新版本",
            CheckUpdate: "檢查更新",
            IsChecking: "正在檢查更新...",
            FoundUpdate: (x)=>`發現新版本：${x}`,
            GoToUpdate: "前往更新"
        },
        SendKey: "發送鍵",
        Theme: "主題",
        TightBorder: "緊湊邊框",
        SendPreviewBubble: "發送預覽氣泡",
        Prompt: {
            Disable: {
                Title: "停用提示詞自動補全",
                SubTitle: "在輸入框開頭輸入 / 即可觸發自動補全"
            },
            List: "自定義提示詞列表",
            ListCount: (builtin, custom)=>`內置 ${builtin} 條，用戶定義 ${custom} 條`,
            Edit: "編輯"
        },
        HistoryCount: {
            Title: "附帶歷史訊息數",
            SubTitle: "每次請求附帶的歷史訊息數"
        },
        CompressThreshold: {
            Title: "歷史訊息長度壓縮閾值",
            SubTitle: "當未壓縮的歷史訊息超過該值時，將進行壓縮"
        },
        Token: {
            Title: "API Key",
            SubTitle: "使用自己的 Key 可規避授權訪問限制",
            Placeholder: "OpenAI API Key"
        },
        Usage: {
            Title: "帳戶餘額",
            SubTitle (used, total) {
                return `本月已使用 $${used}，订阅总额 $${total}`;
            },
            IsChecking: "正在檢查…",
            Check: "重新檢查",
            NoAccess: "輸入API Key查看餘額"
        },
        AccessCode: {
            Title: "授權碼",
            SubTitle: "現在是未授權訪問狀態",
            Placeholder: "請輸入授權碼"
        },
        Model: "模型 (model)",
        Temperature: {
            Title: "隨機性 (temperature)",
            SubTitle: "值越大，回復越隨機"
        },
        MaxTokens: {
            Title: "單次回復限制 (max_tokens)",
            SubTitle: "單次交互所用的最大 Token 數"
        },
        PresencePenlty: {
            Title: "話題新穎度 (presence_penalty)",
            SubTitle: "值越大，越有可能擴展到新話題"
        }
    },
    Store: {
        DefaultTopic: "新的對話",
        BotHello: "請問需要我的協助嗎？",
        Error: "出錯了，請稍後再嘗試",
        Prompt: {
            History: (content)=>"這是 AI 與用戶的歷史聊天總結，作為前情提要：" + content,
            Topic: "直接返回這句話的簡要主題，無須解釋，若無主題，請直接返回「閒聊」",
            Summarize: "簡要總結一下你和用戶的對話，作為後續的上下文提示 prompt，且字數控制在 200 字以內"
        },
        ConfirmClearAll: "確認清除所有對話、設定數據？"
    },
    Copy: {
        Success: "已複製到剪貼簿中",
        Failed: "複製失敗，請賦予剪貼簿權限"
    },
    Context: {
        Toast: (x)=>`已設置 ${x} 條前置上下文`,
        Edit: "前置上下文和歷史記憶",
        Add: "新增壹條"
    }
};
/* harmony default export */ const locales_tw = (tw);

;// CONCATENATED MODULE: ./app/locales/es.ts

const es = {
    WIP: "En construcci\xf3n...",
    Error: {
        Unauthorized: "Acceso no autorizado, por favor ingrese el c\xf3digo de acceso en la p\xe1gina de configuraci\xf3n."
    },
    ChatItem: {
        ChatItemCount: (count)=>`${count} mensajes`
    },
    Chat: {
        SubTitle: (count)=>`${count} mensajes con ChatGPT`,
        Actions: {
            ChatList: "Ir a la lista de chats",
            CompressedHistory: "Historial de memoria comprimido",
            Export: "Exportar todos los mensajes como Markdown",
            Copy: "Copiar",
            Stop: "Detener",
            Retry: "Reintentar"
        },
        Rename: "Renombrar chat",
        Typing: "Escribiendo...",
        Input: (submitKey)=>{
            var inputHints = `Escribe algo y presiona ${submitKey} para enviar`;
            if (submitKey === String(app/* SubmitKey.Enter */.mQ.Enter)) {
                inputHints += ", presiona Shift + Enter para nueva l\xednea";
            }
            return inputHints;
        },
        Send: "Enviar"
    },
    Export: {
        Title: "Todos los mensajes",
        Copy: "Copiar todo",
        Download: "Descargar",
        MessageFromYou: "Mensaje de ti",
        MessageFromChatGPT: "Mensaje de ChatGPT"
    },
    Memory: {
        Title: "Historial de memoria",
        EmptyContent: "A\xfan no hay nada.",
        Copy: "Copiar todo",
        Send: "Send Memory",
        Reset: "Reset Session",
        ResetConfirm: "Resetting will clear the current conversation history and historical memory. Are you sure you want to reset?"
    },
    Home: {
        NewChat: "Nuevo chat",
        DeleteChat: "\xbfConfirmar eliminaci\xf3n de la conversaci\xf3n seleccionada?",
        DeleteToast: "Chat Deleted",
        Revert: "Revert"
    },
    Settings: {
        Title: "Configuraci\xf3n",
        SubTitle: "Todas las configuraciones",
        Actions: {
            ClearAll: "Borrar todos los datos",
            ResetAll: "Restablecer todas las configuraciones",
            Close: "Cerrar"
        },
        Lang: {
            Name: "Language",
            Options: {
                cn: "简体中文",
                en: "Ingl\xe9s",
                tw: "繁體中文",
                es: "Espa\xf1ol",
                it: "Italiano"
            }
        },
        Avatar: "Avatar",
        FontSize: {
            Title: "Tama\xf1o de fuente",
            SubTitle: "Ajustar el tama\xf1o de fuente del contenido del chat"
        },
        Update: {
            Version: (x)=>`Versión: ${x}`,
            IsLatest: "\xdaltima versi\xf3n",
            CheckUpdate: "Buscar actualizaciones",
            IsChecking: "Buscando actualizaciones...",
            FoundUpdate: (x)=>`Se encontró una nueva versión: ${x}`,
            GoToUpdate: "Actualizar"
        },
        SendKey: "Tecla de env\xedo",
        Theme: "Tema",
        TightBorder: "Borde ajustado",
        SendPreviewBubble: "Enviar burbuja de vista previa",
        Prompt: {
            Disable: {
                Title: "Desactivar autocompletado",
                SubTitle: "Escribe / para activar el autocompletado"
            },
            List: "Lista de autocompletado",
            ListCount: (builtin, custom)=>`${builtin} incorporado, ${custom} definido por el usuario`,
            Edit: "Editar"
        },
        HistoryCount: {
            Title: "Cantidad de mensajes adjuntos",
            SubTitle: "N\xfamero de mensajes enviados adjuntos por solicitud"
        },
        CompressThreshold: {
            Title: "Umbral de compresi\xf3n de historial",
            SubTitle: "Se comprimir\xe1n los mensajes si la longitud de los mensajes no comprimidos supera el valor"
        },
        Token: {
            Title: "Clave de API",
            SubTitle: "Utiliza tu clave para ignorar el l\xedmite de c\xf3digo de acceso",
            Placeholder: "Clave de la API de OpenAI"
        },
        Usage: {
            Title: "Saldo de la cuenta",
            SubTitle (used, total) {
                return `Usado $${used}, subscription $${total}`;
            },
            IsChecking: "Comprobando...",
            Check: "Comprobar de nuevo",
            NoAccess: "Introduzca la clave API para comprobar el saldo"
        },
        AccessCode: {
            Title: "C\xf3digo de acceso",
            SubTitle: "Control de acceso habilitado",
            Placeholder: "Necesita c\xf3digo de acceso"
        },
        Model: "Modelo",
        Temperature: {
            Title: "Temperatura",
            SubTitle: "Un valor mayor genera una salida m\xe1s aleatoria"
        },
        MaxTokens: {
            Title: "M\xe1ximo de tokens",
            SubTitle: "Longitud m\xe1xima de tokens de entrada y tokens generados"
        },
        PresencePenlty: {
            Title: "Penalizaci\xf3n de presencia",
            SubTitle: "Un valor mayor aumenta la probabilidad de hablar sobre nuevos temas"
        }
    },
    Store: {
        DefaultTopic: "Nueva conversaci\xf3n",
        BotHello: "\xa1Hola! \xbfC\xf3mo puedo ayudarte hoy?",
        Error: "Algo sali\xf3 mal, por favor intenta nuevamente m\xe1s tarde.",
        Prompt: {
            History: (content)=>"Este es un resumen del historial del chat entre la IA y el usuario como recapitulaci\xf3n: " + content,
            Topic: "Por favor, genera un t\xedtulo de cuatro a cinco palabras que resuma nuestra conversaci\xf3n sin ning\xfan inicio, puntuaci\xf3n, comillas, puntos, s\xedmbolos o texto adicional. Elimina las comillas que lo envuelven.",
            Summarize: "Resuma nuestra discusi\xf3n brevemente en 200 caracteres o menos para usarlo como un recordatorio para futuros contextos."
        },
        ConfirmClearAll: "\xbfConfirmar para borrar todos los datos de chat y configuraci\xf3n?"
    },
    Copy: {
        Success: "Copiado al portapapeles",
        Failed: "La copia fall\xf3, por favor concede permiso para acceder al portapapeles"
    },
    Context: {
        Toast: (x)=>`With ${x} contextual prompts`,
        Edit: "Contextual and Memory Prompts",
        Add: "Add One"
    }
};
/* harmony default export */ const locales_es = (es);

;// CONCATENATED MODULE: ./app/locales/it.ts

const it = {
    WIP: "Work in progress...",
    Error: {
        Unauthorized: "Accesso non autorizzato, inserire il codice di accesso nella pagina delle impostazioni."
    },
    ChatItem: {
        ChatItemCount: (count)=>`${count} messaggi`
    },
    Chat: {
        SubTitle: (count)=>`${count} messaggi con ChatGPT`,
        Actions: {
            ChatList: "Vai alla Chat List",
            CompressedHistory: "Prompt di memoria della cronologia compressa",
            Export: "Esportazione di tutti i messaggi come Markdown",
            Copy: "Copia",
            Stop: "Stop",
            Retry: "Riprova"
        },
        Rename: "Rinomina Chat",
        Typing: "Typing…",
        Input: (submitKey)=>{
            var inputHints = `Scrivi qualcosa e premi ${submitKey} per inviare`;
            if (submitKey === String(app/* SubmitKey.Enter */.mQ.Enter)) {
                inputHints += ", premi Shift + Enter per andare a capo";
            }
            return inputHints;
        },
        Send: "Invia"
    },
    Export: {
        Title: "Tutti i messaggi",
        Copy: "Copia tutto",
        Download: "Scarica",
        MessageFromYou: "Messaggio da te",
        MessageFromChatGPT: "Messaggio da ChatGPT"
    },
    Memory: {
        Title: "Prompt di memoria",
        EmptyContent: "Vuoto.",
        Copy: "Copia tutto",
        Send: "Send Memory",
        Reset: "Reset Session",
        ResetConfirm: "Resetting will clear the current conversation history and historical memory. Are you sure you want to reset?"
    },
    Home: {
        NewChat: "Nuova Chat",
        DeleteChat: "Confermare la cancellazione della conversazione selezionata?",
        DeleteToast: "Chat Deleted",
        Revert: "Revert"
    },
    Settings: {
        Title: "Impostazioni",
        SubTitle: "Tutte le impostazioni",
        Actions: {
            ClearAll: "Cancella tutti i dati",
            ResetAll: "Resetta tutte le impostazioni",
            Close: "Chiudi"
        },
        Lang: {
            Name: "Lingue",
            Options: {
                cn: "简体中文",
                en: "English",
                tw: "繁體中文",
                es: "Espa\xf1ol",
                it: "Italiano"
            }
        },
        Avatar: "Avatar",
        FontSize: {
            Title: "Dimensione carattere",
            SubTitle: "Regolare la dimensione dei caratteri del contenuto della chat"
        },
        Update: {
            Version: (x)=>`Versione: ${x}`,
            IsLatest: "Ultima versione",
            CheckUpdate: "Controlla aggiornamenti",
            IsChecking: "Sto controllando gli aggiornamenti...",
            FoundUpdate: (x)=>`Trovata nuova versione: ${x}`,
            GoToUpdate: "Aggiorna"
        },
        SendKey: "Tasto invia",
        Theme: "tema",
        TightBorder: "Bordi stretti",
        SendPreviewBubble: "Invia l'anteprima della bolla",
        Prompt: {
            Disable: {
                Title: "Disabilita l'auto completamento",
                SubTitle: "Input / per attivare il completamento automatico"
            },
            List: "Elenco dei suggerimenti",
            ListCount: (builtin, custom)=>`${builtin} built-in, ${custom} user-defined`,
            Edit: "Modifica"
        },
        HistoryCount: {
            Title: "Conteggio dei messaggi allegati",
            SubTitle: "Numero di messaggi inviati allegati per richiesta"
        },
        CompressThreshold: {
            Title: "Soglia di compressione della cronologia",
            SubTitle: "Comprimer\xe0 se la lunghezza dei messaggi non compressi supera il valore"
        },
        Token: {
            Title: "Chiave API",
            SubTitle: "Utilizzare la chiave per ignorare il limite del codice di accesso",
            Placeholder: "OpenAI API Key"
        },
        Usage: {
            Title: "Bilancio Account",
            SubTitle (used, total) {
                return `Usato in questo mese $${used}, subscription $${total}`;
            },
            IsChecking: "Controllando...",
            Check: "Controlla ancora",
            NoAccess: "Inserire la chiave API per controllare il saldo"
        },
        AccessCode: {
            Title: "Codice d'accesso",
            SubTitle: "Controllo d'accesso abilitato",
            Placeholder: "Inserisci il codice d'accesso"
        },
        Model: "Modello GPT",
        Temperature: {
            Title: "Temperature",
            SubTitle: "Un valore maggiore rende l'output pi\xf9 casuale"
        },
        MaxTokens: {
            Title: "Token massimi",
            SubTitle: "Lunghezza massima dei token in ingresso e dei token generati"
        },
        PresencePenlty: {
            Title: "Penalit\xe0 di presenza",
            SubTitle: "Un valore maggiore aumenta la probabilit\xe0 di parlare di nuovi argomenti"
        }
    },
    Store: {
        DefaultTopic: "Nuova conversazione",
        BotHello: "Ciao, come posso aiutarti oggi?",
        Error: "Qualcosa \xe8 andato storto, riprova pi\xf9 tardi.",
        Prompt: {
            History: (content)=>"Questo \xe8 un riassunto della cronologia delle chat tra l'IA e l'utente:" + content,
            Topic: "Si prega di generare un titolo di quattro o cinque parole che riassuma la nostra conversazione senza alcuna traccia, punteggiatura, virgolette, punti, simboli o testo aggiuntivo. Rimuovere le virgolette",
            Summarize: "Riassumi brevemente la nostra discussione in 200 caratteri o meno per usarla come spunto per una futura conversazione."
        },
        ConfirmClearAll: "Confermi la cancellazione di tutti i dati della chat e delle impostazioni?"
    },
    Copy: {
        Success: "Copiato sugli appunti",
        Failed: "Copia fallita, concedere l'autorizzazione all'accesso agli appunti"
    },
    Context: {
        Toast: (x)=>`Con ${x} prompts contestuali`,
        Edit: "Prompt contestuali e di memoria",
        Add: "Aggiungi altro"
    }
};
/* harmony default export */ const locales_it = (it);

;// CONCATENATED MODULE: ./app/locales/index.ts





const AllLangs = [
    "en",
    "cn",
    "tw",
    "es",
    "it"
];
const LANG_KEY = "lang";
function getItem(key) {
    try {
        return localStorage.getItem(key);
    } catch  {
        return null;
    }
}
function setItem(key, value) {
    try {
        localStorage.setItem(key, value);
    } catch  {}
}
function getLanguage() {
    try {
        return navigator.language.toLowerCase();
    } catch  {
        return "cn";
    }
}
function getLang() {
    const savedLang = getItem(LANG_KEY);
    if (AllLangs.includes(savedLang ?? "")) {
        return savedLang;
    }
    const lang = getLanguage();
    if (lang.includes("zh") || lang.includes("cn")) {
        return "cn";
    } else if (lang.includes("tw")) {
        return "tw";
    } else if (lang.includes("es")) {
        return "es";
    } else if (lang.includes("it")) {
        return "it";
    } else {
        return "en";
    }
}
function changeLang(lang) {
    setItem(LANG_KEY, lang);
    location.reload();
}
/* harmony default export */ const locales = (({
    en: locales_en,
    cn: locales_cn,
    tw: locales_tw,
    es: locales_es,
    it: locales_it
})[getLang()]);


/***/ }),

/***/ 25:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
if (!Array.prototype.at) {
    Array.prototype.at = function(index) {
        // Get the length of the array
        const length = this.length;
        // Convert negative index to a positive index
        if (index < 0) {
            index = length + index;
        }
        // Return undefined if the index is out of range
        if (index < 0 || index >= length) {
            return undefined;
        }
        // Use Array.prototype.slice method to get value at the specified index
        return Array.prototype.slice.call(this, index, index + 1)[0];
    };
}



/***/ }),

/***/ 6154:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "b6": () => (/* binding */ requestUsage),
/* harmony export */   "qd": () => (/* binding */ requestWithPrompt),
/* harmony export */   "u4": () => (/* binding */ ControllerPool),
/* harmony export */   "yY": () => (/* binding */ requestChatStream)
/* harmony export */ });
/* unused harmony exports requestOpenaiClient, requestChat */
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6388);
/* harmony import */ var _components_ui_lib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(198);


const TIME_OUT_MS = 30000;
const makeRequestParam = (messages, options)=>{
    let sendMessages = messages.map((v)=>({
            role: v.role,
            content: v.content
        }));
    if (options?.filterBot) {
        sendMessages = sendMessages.filter((m)=>m.role !== "assistant");
    }
    const modelConfig = {
        ..._store__WEBPACK_IMPORTED_MODULE_0__/* .useChatStore.getState */ .aK.getState().config.modelConfig
    };
    // @yidadaa: wont send max_tokens, because it is nonsense for Muggles
    // @ts-expect-error
    delete modelConfig.max_tokens;
    return {
        messages: sendMessages,
        stream: options?.stream,
        ...modelConfig
    };
};
function getHeaders() {
    const accessStore = _store__WEBPACK_IMPORTED_MODULE_0__/* .useAccessStore.getState */ ._X.getState();
    let headers = {};
    if (accessStore.enabledAccessControl()) {
        headers["access-code"] = accessStore.accessCode;
    }
    if (accessStore.token && accessStore.token.length > 0) {
        headers["token"] = accessStore.token;
    }
    return headers;
}
function requestOpenaiClient(path) {
    return (body, method = "POST")=>fetch("/api/openai?_vercel_no_cache=1", {
            method,
            headers: {
                "Content-Type": "application/json",
                path,
                ...getHeaders()
            },
            body: body && JSON.stringify(body)
        });
}
async function requestChat(messages) {
    const req = makeRequestParam(messages, {
        filterBot: true
    });
    const res = await requestOpenaiClient("v1/chat/completions")(req);
    try {
        const response = await res.json();
        return response;
    } catch (error) {
        console.error("[Request Chat] ", error, res.body);
    }
}
async function requestUsage() {
    const formatDate = (d)=>`${d.getFullYear()}-${(d.getMonth() + 1).toString().padStart(2, "0")}-${d.getDate().toString().padStart(2, "0")}`;
    const ONE_DAY = 2 * 24 * 60 * 60 * 1000;
    const now = new Date(Date.now() + ONE_DAY);
    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);
    const startDate = formatDate(startOfMonth);
    const endDate = formatDate(now);
    const [used, subs] = await Promise.all([
        requestOpenaiClient(`dashboard/billing/usage?start_date=${startDate}&end_date=${endDate}`)(null, "GET"),
        requestOpenaiClient("dashboard/billing/subscription")(null, "GET")
    ]);
    const response = await used.json();
    const total = await subs.json();
    if (response.error && response.error.type) {
        (0,_components_ui_lib__WEBPACK_IMPORTED_MODULE_1__/* .showToast */ .CF)(response.error.message);
        return;
    }
    if (response.total_usage) {
        response.total_usage = Math.round(response.total_usage) / 100;
    }
    return {
        used: response.total_usage,
        subscription: total.hard_limit_usd
    };
}
async function requestChatStream(messages, options) {
    const req = makeRequestParam(messages, {
        stream: true,
        filterBot: options?.filterBot
    });
    console.log("[Request] ", req);
    const controller = new AbortController();
    const reqTimeoutId = setTimeout(()=>controller.abort(), TIME_OUT_MS);
    try {
        const res = await fetch("/api/chat-stream", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                path: "v1/chat/completions",
                ...getHeaders()
            },
            body: JSON.stringify(req),
            signal: controller.signal
        });
        clearTimeout(reqTimeoutId);
        let responseText = "";
        const finish = ()=>{
            options?.onMessage(responseText, true);
            controller.abort();
        };
        if (res.ok) {
            const reader = res.body?.getReader();
            const decoder = new TextDecoder();
            options?.onController?.(controller);
            while(true){
                // handle time out, will stop if no response in 10 secs
                const resTimeoutId = setTimeout(()=>finish(), TIME_OUT_MS);
                const content = await reader?.read();
                clearTimeout(resTimeoutId);
                const text = decoder.decode(content?.value);
                responseText += text;
                const done = !content || content.done;
                options?.onMessage(responseText, false);
                if (done) {
                    break;
                }
            }
            finish();
        } else if (res.status === 401) {
            console.error("Anauthorized");
            options?.onError(new Error("Anauthorized"), res.status);
        } else {
            console.error("Stream Error", res.body);
            options?.onError(new Error("Stream Error"), res.status);
        }
    } catch (err) {
        console.error("NetWork Error", err);
        options?.onError(err);
    }
}
async function requestWithPrompt(messages, prompt) {
    messages = messages.concat([
        {
            role: "user",
            content: prompt,
            date: new Date().toLocaleString()
        }
    ]);
    const res = await requestChat(messages);
    return res?.choices?.at(0)?.message?.content ?? "";
}
// To store message streaming controller
const ControllerPool = {
    controllers: {},
    addController (sessionIndex, messageId, controller) {
        const key = this.key(sessionIndex, messageId);
        this.controllers[key] = controller;
        return key;
    },
    stop (sessionIndex, messageId) {
        const key = this.key(sessionIndex, messageId);
        const controller = this.controllers[key];
        controller?.abort();
    },
    remove (sessionIndex, messageId) {
        const key = this.key(sessionIndex, messageId);
        delete this.controllers[key];
    },
    key (sessionIndex, messageIndex) {
        return `${sessionIndex},${messageIndex}`;
    }
};


/***/ }),

/***/ 2361:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "K$": () => (/* binding */ ROLES),
/* harmony export */   "L": () => (/* binding */ ALL_MODELS),
/* harmony export */   "Q2": () => (/* binding */ Theme),
/* harmony export */   "Xm": () => (/* binding */ ModalConfigValidator),
/* harmony export */   "aK": () => (/* binding */ useChatStore),
/* harmony export */   "mQ": () => (/* binding */ SubmitKey),
/* harmony export */   "tn": () => (/* binding */ createMessage),
/* harmony export */   "ux": () => (/* binding */ BOT_HELLO)
/* harmony export */ });
/* unused harmony exports limitNumber, limitModel */
/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3998);
/* harmony import */ var zustand_middleware__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(8658);
/* harmony import */ var _requests__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6154);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);
/* harmony import */ var _locales__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4708);
/* harmony import */ var _components_ui_lib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(198);






function createMessage(override) {
    return {
        id: Date.now(),
        date: new Date().toLocaleString(),
        role: "user",
        content: "",
        ...override
    };
}
var SubmitKey;
(function(SubmitKey) {
    SubmitKey["Enter"] = "Enter";
    SubmitKey["CtrlEnter"] = "Ctrl + Enter";
    SubmitKey["ShiftEnter"] = "Shift + Enter";
    SubmitKey["AltEnter"] = "Alt + Enter";
    SubmitKey["MetaEnter"] = "Meta + Enter";
})(SubmitKey || (SubmitKey = {}));
var Theme;
(function(Theme) {
    Theme["Auto"] = "auto";
    Theme["Dark"] = "dark";
    Theme["Light"] = "light";
})(Theme || (Theme = {}));
const ROLES = [
    "system",
    "user",
    "assistant"
];
const ENABLE_GPT4 = true;
const ALL_MODELS = [
    {
        name: "gpt-4",
        available: ENABLE_GPT4
    },
    {
        name: "gpt-4-0314",
        available: ENABLE_GPT4
    },
    {
        name: "gpt-4-32k",
        available: ENABLE_GPT4
    },
    {
        name: "gpt-4-32k-0314",
        available: ENABLE_GPT4
    },
    {
        name: "gpt-3.5-turbo",
        available: true
    },
    {
        name: "gpt-3.5-turbo-0301",
        available: true
    }
];
function limitNumber(x, min, max, defaultValue) {
    if (typeof x !== "number" || isNaN(x)) {
        return defaultValue;
    }
    return Math.min(max, Math.max(min, x));
}
function limitModel(name) {
    return ALL_MODELS.some((m)=>m.name === name && m.available) ? name : ALL_MODELS[4].name;
}
const ModalConfigValidator = {
    model (x) {
        return limitModel(x);
    },
    max_tokens (x) {
        return limitNumber(x, 0, 32000, 2000);
    },
    presence_penalty (x) {
        return limitNumber(x, -2, 2, 0);
    },
    temperature (x) {
        return limitNumber(x, 0, 2, 1);
    }
};
const DEFAULT_CONFIG = {
    historyMessageCount: 4,
    compressMessageLengthThreshold: 1000,
    sendBotMessages: true,
    submitKey: SubmitKey.CtrlEnter,
    avatar: "1f603",
    fontSize: 14,
    theme: Theme.Auto,
    tightBorder: false,
    sendPreviewBubble: true,
    disablePromptHint: false,
    modelConfig: {
        model: "gpt-3.5-turbo",
        temperature: 1,
        max_tokens: 2000,
        presence_penalty: 0
    }
};
const DEFAULT_TOPIC = _locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Store.DefaultTopic */ .ZP.Store.DefaultTopic;
const BOT_HELLO = createMessage({
    role: "assistant",
    content: _locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Store.BotHello */ .ZP.Store.BotHello
});
function createEmptySession() {
    const createDate = new Date().toLocaleString();
    return {
        id: Date.now(),
        topic: DEFAULT_TOPIC,
        sendMemory: true,
        memoryPrompt: "",
        context: [],
        messages: [],
        stat: {
            tokenCount: 0,
            wordCount: 0,
            charCount: 0
        },
        lastUpdate: createDate,
        lastSummarizeIndex: 0
    };
}
function countMessages(msgs) {
    return msgs.reduce((pre, cur)=>pre + cur.content.length, 0);
}
const LOCAL_KEY = "chat-next-web-store";
const useChatStore = (0,zustand__WEBPACK_IMPORTED_MODULE_4__/* .create */ .Ue)()((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_5__/* .persist */ .tJ)((set, get)=>({
        sessions: [
            createEmptySession()
        ],
        currentSessionIndex: 0,
        config: {
            ...DEFAULT_CONFIG
        },
        clearSessions () {
            set(()=>({
                    sessions: [
                        createEmptySession()
                    ],
                    currentSessionIndex: 0
                }));
        },
        resetConfig () {
            set(()=>({
                    config: {
                        ...DEFAULT_CONFIG
                    }
                }));
        },
        getConfig () {
            return get().config;
        },
        updateConfig (updater) {
            const config = get().config;
            updater(config);
            set(()=>({
                    config
                }));
        },
        selectSession (index) {
            set({
                currentSessionIndex: index
            });
        },
        removeSession (index) {
            set((state)=>{
                let nextIndex = state.currentSessionIndex;
                const sessions = state.sessions;
                if (sessions.length === 1) {
                    return {
                        currentSessionIndex: 0,
                        sessions: [
                            createEmptySession()
                        ]
                    };
                }
                sessions.splice(index, 1);
                if (nextIndex === index) {
                    nextIndex -= 1;
                }
                return {
                    currentSessionIndex: nextIndex,
                    sessions
                };
            });
        },
        moveSession (from, to) {
            set((state)=>{
                const { sessions , currentSessionIndex: oldIndex  } = state;
                // move the session
                const newSessions = [
                    ...sessions
                ];
                const session = newSessions[from];
                newSessions.splice(from, 1);
                newSessions.splice(to, 0, session);
                // modify current session id
                let newIndex = oldIndex === from ? to : oldIndex;
                if (oldIndex > from && oldIndex <= to) {
                    newIndex -= 1;
                } else if (oldIndex < from && oldIndex >= to) {
                    newIndex += 1;
                }
                return {
                    currentSessionIndex: newIndex,
                    sessions: newSessions
                };
            });
        },
        newSession () {
            set((state)=>({
                    currentSessionIndex: 0,
                    sessions: [
                        createEmptySession()
                    ].concat(state.sessions)
                }));
        },
        deleteSession () {
            const deletedSession = get().currentSession();
            const index = get().currentSessionIndex;
            const isLastSession = get().sessions.length === 1;
            if (!(0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .isMobileScreen */ .Av)() || confirm(_locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Home.DeleteChat */ .ZP.Home.DeleteChat)) {
                get().removeSession(index);
                (0,_components_ui_lib__WEBPACK_IMPORTED_MODULE_3__/* .showToast */ .CF)(_locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Home.DeleteToast */ .ZP.Home.DeleteToast, {
                    text: _locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Home.Revert */ .ZP.Home.Revert,
                    onClick () {
                        set((state)=>({
                                sessions: state.sessions.slice(0, index).concat([
                                    deletedSession
                                ]).concat(state.sessions.slice(index + Number(isLastSession)))
                            }));
                    }
                });
            }
        },
        currentSession () {
            let index = get().currentSessionIndex;
            const sessions = get().sessions;
            if (index < 0 || index >= sessions.length) {
                index = Math.min(sessions.length - 1, Math.max(0, index));
                set(()=>({
                        currentSessionIndex: index
                    }));
            }
            const session = sessions[index];
            return session;
        },
        onNewMessage (message) {
            get().updateCurrentSession((session)=>{
                session.lastUpdate = new Date().toLocaleString();
            });
            get().updateStat(message);
            get().summarizeSession();
        },
        async onUserInput (content) {
            const userMessage = createMessage({
                role: "user",
                content
            });
            const botMessage = createMessage({
                role: "assistant",
                streaming: true
            });
            // get recent messages
            const recentMessages = get().getMessagesWithMemory();
            const sendMessages = recentMessages.concat(userMessage);
            const sessionIndex = get().currentSessionIndex;
            const messageIndex = get().currentSession().messages.length + 1;
            // save user's and bot's message
            get().updateCurrentSession((session)=>{
                session.messages.push(userMessage);
                session.messages.push(botMessage);
            });
            // make request
            console.log("[User Input] ", sendMessages);
            (0,_requests__WEBPACK_IMPORTED_MODULE_0__/* .requestChatStream */ .yY)(sendMessages, {
                onMessage (content, done) {
                    // stream response
                    if (done) {
                        botMessage.streaming = false;
                        botMessage.content = content;
                        get().onNewMessage(botMessage);
                        _requests__WEBPACK_IMPORTED_MODULE_0__/* .ControllerPool.remove */ .u4.remove(sessionIndex, botMessage.id ?? messageIndex);
                    } else {
                        botMessage.content = content;
                        set(()=>({}));
                    }
                },
                onError (error, statusCode) {
                    if (statusCode === 401) {
                        botMessage.content = _locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Error.Unauthorized */ .ZP.Error.Unauthorized;
                    } else {
                        botMessage.content += "\n\n" + _locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Store.Error */ .ZP.Store.Error;
                    }
                    botMessage.streaming = false;
                    userMessage.isError = true;
                    botMessage.isError = true;
                    set(()=>({}));
                    _requests__WEBPACK_IMPORTED_MODULE_0__/* .ControllerPool.remove */ .u4.remove(sessionIndex, botMessage.id ?? messageIndex);
                },
                onController (controller) {
                    // collect controller for stop/retry
                    _requests__WEBPACK_IMPORTED_MODULE_0__/* .ControllerPool.addController */ .u4.addController(sessionIndex, botMessage.id ?? messageIndex, controller);
                },
                filterBot: !get().config.sendBotMessages,
                modelConfig: get().config.modelConfig
            });
        },
        getMemoryPrompt () {
            const session = get().currentSession();
            return {
                role: "system",
                content: _locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Store.Prompt.History */ .ZP.Store.Prompt.History(session.memoryPrompt),
                date: ""
            };
        },
        getMessagesWithMemory () {
            const session = get().currentSession();
            const config = get().config;
            const messages = session.messages.filter((msg)=>!msg.isError);
            const n = messages.length;
            const context = session.context.slice();
            if (session.sendMemory && session.memoryPrompt && session.memoryPrompt.length > 0) {
                const memoryPrompt = get().getMemoryPrompt();
                context.push(memoryPrompt);
            }
            const recentMessages = context.concat(messages.slice(Math.max(0, n - config.historyMessageCount)));
            return recentMessages;
        },
        updateMessage (sessionIndex, messageIndex, updater) {
            const sessions = get().sessions;
            const session = sessions.at(sessionIndex);
            const messages = session?.messages;
            updater(messages?.at(messageIndex));
            set(()=>({
                    sessions
                }));
        },
        resetSession () {
            get().updateCurrentSession((session)=>{
                session.messages = [];
                session.memoryPrompt = "";
            });
        },
        summarizeSession () {
            const session = get().currentSession();
            // should summarize topic after chating more than 50 words
            const SUMMARIZE_MIN_LEN = 50;
            if (session.topic === DEFAULT_TOPIC && countMessages(session.messages) >= SUMMARIZE_MIN_LEN) {
                (0,_requests__WEBPACK_IMPORTED_MODULE_0__/* .requestWithPrompt */ .qd)(session.messages, _locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Store.Prompt.Topic */ .ZP.Store.Prompt.Topic).then((res)=>{
                    get().updateCurrentSession((session)=>session.topic = res ? (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .trimTopic */ .ez)(res) : DEFAULT_TOPIC);
                });
            }
            const config = get().config;
            let toBeSummarizedMsgs = session.messages.slice(session.lastSummarizeIndex);
            const historyMsgLength = countMessages(toBeSummarizedMsgs);
            if ((historyMsgLength > get().config?.modelConfig?.max_tokens) ?? 4000) {
                const n = toBeSummarizedMsgs.length;
                toBeSummarizedMsgs = toBeSummarizedMsgs.slice(Math.max(0, n - config.historyMessageCount));
            }
            // add memory prompt
            toBeSummarizedMsgs.unshift(get().getMemoryPrompt());
            const lastSummarizeIndex = session.messages.length;
            console.log("[Chat History] ", toBeSummarizedMsgs, historyMsgLength, config.compressMessageLengthThreshold);
            if (historyMsgLength > config.compressMessageLengthThreshold) {
                (0,_requests__WEBPACK_IMPORTED_MODULE_0__/* .requestChatStream */ .yY)(toBeSummarizedMsgs.concat({
                    role: "system",
                    content: _locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Store.Prompt.Summarize */ .ZP.Store.Prompt.Summarize,
                    date: ""
                }), {
                    filterBot: false,
                    onMessage (message, done) {
                        session.memoryPrompt = message;
                        if (done) {
                            console.log("[Memory] ", session.memoryPrompt);
                            session.lastSummarizeIndex = lastSummarizeIndex;
                        }
                    },
                    onError (error) {
                        console.error("[Summarize] ", error);
                    }
                });
            }
        },
        updateStat (message) {
            get().updateCurrentSession((session)=>{
                session.stat.charCount += message.content.length;
            // TODO: should update chat count and word count
            });
        },
        updateCurrentSession (updater) {
            const sessions = get().sessions;
            const index = get().currentSessionIndex;
            updater(sessions[index]);
            set(()=>({
                    sessions
                }));
        },
        clearAllData () {
            if (confirm(_locales__WEBPACK_IMPORTED_MODULE_2__/* ["default"].Store.ConfirmClearAll */ .ZP.Store.ConfirmClearAll)) {
                localStorage.clear();
                location.reload();
            }
        }
    }), {
    name: LOCAL_KEY,
    version: 1.2,
    migrate (persistedState, version) {
        const state = persistedState;
        if (version === 1) {
            state.sessions.forEach((s)=>s.context = []);
        }
        if (version < 1.2) {
            state.sessions.forEach((s)=>s.sendMemory = true);
        }
        return state;
    }
}));


/***/ }),

/***/ 6388:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "L": () => (/* reexport */ app/* ALL_MODELS */.L),
  "ux": () => (/* reexport */ app/* BOT_HELLO */.ux),
  "Xm": () => (/* reexport */ app/* ModalConfigValidator */.Xm),
  "K$": () => (/* reexport */ app/* ROLES */.K$),
  "mQ": () => (/* reexport */ app/* SubmitKey */.mQ),
  "Q2": () => (/* reexport */ app/* Theme */.Q2),
  "tn": () => (/* reexport */ app/* createMessage */.tn),
  "_X": () => (/* reexport */ useAccessStore),
  "aK": () => (/* reexport */ app/* useChatStore */.aK),
  "u2": () => (/* reexport */ useUpdateStore)
});

// UNUSED EXPORTS: ACCESS_KEY, UPDATE_KEY, limitModel, limitNumber

// EXTERNAL MODULE: ./app/store/app.ts
var app = __webpack_require__(2361);
// EXTERNAL MODULE: ./node_modules/zustand/esm/index.mjs + 1 modules
var esm = __webpack_require__(3998);
// EXTERNAL MODULE: ./node_modules/zustand/esm/middleware.mjs
var middleware = __webpack_require__(8658);
// EXTERNAL MODULE: ./app/constant.ts
var constant = __webpack_require__(6685);
// EXTERNAL MODULE: ./app/utils.ts
var utils = __webpack_require__(172);
;// CONCATENATED MODULE: ./app/store/update.ts




const UPDATE_KEY = "chat-update";
const useUpdateStore = (0,esm/* create */.Ue)()((0,middleware/* persist */.tJ)((set, get)=>({
        lastUpdate: 0,
        remoteId: "",
        async getLatestCommitId (force = false) {
            const overTenMins = Date.now() - get().lastUpdate > 10 * 60 * 1000;
            const shouldFetch = force || overTenMins;
            if (!shouldFetch) {
                return (0,utils/* getCurrentVersion */.w1)();
            }
            try {
                // const data = await (await fetch(FETCH_TAG_URL)).json();
                // const remoteId = data[0].name as string;
                const data = await (await fetch(constant/* FETCH_COMMIT_URL */.TE)).json();
                const remoteId = data[0].sha.substring(0, 7);
                set(()=>({
                        lastUpdate: Date.now(),
                        remoteId
                    }));
                console.log("[Got Upstream] ", remoteId);
                return remoteId;
            } catch (error) {
                console.error("[Fetch Upstream Commit Id]", error);
                return (0,utils/* getCurrentVersion */.w1)();
            }
        }
    }), {
    name: UPDATE_KEY,
    version: 1
}));

;// CONCATENATED MODULE: ./app/store/access.ts



const ACCESS_KEY = "access-control";
const useAccessStore = (0,esm/* create */.Ue)()((0,middleware/* persist */.tJ)((set, get)=>({
        token: "",
        accessCode: "",
        enabledAccessControl () {
            return (0,utils/* queryMeta */.ep)("access") === "enabled";
        },
        updateCode (code) {
            set((state)=>({
                    accessCode: code
                }));
        },
        updateToken (token) {
            set((state)=>({
                    token
                }));
        }
    }), {
    name: ACCESS_KEY,
    version: 1
}));

;// CONCATENATED MODULE: ./app/store/index.ts





/***/ }),

/***/ 5273:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "f5": () => (/* binding */ usePromptStore),
/* harmony export */   "oD": () => (/* binding */ SearchService)
/* harmony export */ });
/* unused harmony export PROMPT_KEY */
/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3998);
/* harmony import */ var zustand_middleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8658);
/* harmony import */ var fuse_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5971);
/* harmony import */ var fuse_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fuse_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _locales__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4708);




const PROMPT_KEY = "prompt-store";
const SearchService = {
    ready: false,
    engine: new (fuse_js__WEBPACK_IMPORTED_MODULE_1___default())([], {
        keys: [
            "title"
        ]
    }),
    count: {
        builtin: 0
    },
    allBuiltInPrompts: [],
    init (prompts) {
        if (this.ready) {
            return;
        }
        this.allBuiltInPrompts = prompts;
        this.engine.setCollection(prompts);
        this.ready = true;
    },
    remove (id) {
        this.engine.remove((doc)=>doc.id === id);
    },
    add (prompt) {
        this.engine.add(prompt);
    },
    search (text) {
        const results = this.engine.search(text);
        return results.map((v)=>v.item);
    }
};
const usePromptStore = (0,zustand__WEBPACK_IMPORTED_MODULE_2__/* .create */ .Ue)()((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_3__/* .persist */ .tJ)((set, get)=>({
        latestId: 0,
        prompts: new Map(),
        add (prompt) {
            const prompts = get().prompts;
            prompt.id = get().latestId + 1;
            prompts.set(prompt.id, prompt);
            set(()=>({
                    latestId: prompt.id,
                    prompts: prompts
                }));
            return prompt.id;
        },
        remove (id) {
            const prompts = get().prompts;
            prompts.delete(id);
            SearchService.remove(id);
            set(()=>({
                    prompts
                }));
        },
        search (text) {
            if (text.length === 0) {
                // return all prompts
                const userPrompts = get().prompts?.values?.() ?? [];
                return SearchService.allBuiltInPrompts.concat([
                    ...userPrompts
                ]);
            }
            return SearchService.search(text);
        }
    }), {
    name: PROMPT_KEY,
    version: 1,
    onRehydrateStorage (state) {
        const PROMPT_URL = "./prompts.json";
        fetch(PROMPT_URL).then((res)=>res.json()).then((res)=>{
            let fetchPrompts = [
                res.en,
                res.cn
            ];
            if ((0,_locales__WEBPACK_IMPORTED_MODULE_0__/* .getLang */ .VQ)() === "cn") {
                fetchPrompts = fetchPrompts.reverse();
            }
            const builtinPrompts = fetchPrompts.map((promptList)=>{
                return promptList.map(([title, content])=>({
                        title,
                        content
                    }));
            }).concat([
                ...state?.prompts?.values() ?? []
            ]);
            const allPromptsForSearch = builtinPrompts.reduce((pre, cur)=>pre.concat(cur), []);
            SearchService.count.builtin = res.en.length + res.cn.length;
            SearchService.init(allPromptsForSearch);
        });
    }
}));


/***/ }),

/***/ 172:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Av": () => (/* binding */ isMobileScreen),
/* harmony export */   "Ri": () => (/* binding */ selectOrCopy),
/* harmony export */   "ep": () => (/* binding */ queryMeta),
/* harmony export */   "ez": () => (/* binding */ trimTopic),
/* harmony export */   "lx": () => (/* binding */ autoGrowTextArea),
/* harmony export */   "qc": () => (/* binding */ getEmojiUrl),
/* harmony export */   "vQ": () => (/* binding */ copyToClipboard),
/* harmony export */   "w1": () => (/* binding */ getCurrentVersion)
/* harmony export */ });
/* unused harmony exports downloadAs, isIOS, isFirefox */
/* harmony import */ var _components_ui_lib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(198);
/* harmony import */ var _locales__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4708);


function trimTopic(topic) {
    return topic.replace(/[，。！？”“"、,.!?]*$/, "");
}
async function copyToClipboard(text) {
    try {
        await navigator.clipboard.writeText(text);
        (0,_components_ui_lib__WEBPACK_IMPORTED_MODULE_0__/* .showToast */ .CF)(_locales__WEBPACK_IMPORTED_MODULE_1__/* ["default"].Copy.Success */ .ZP.Copy.Success);
    } catch (error) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
            document.execCommand("copy");
            (0,_components_ui_lib__WEBPACK_IMPORTED_MODULE_0__/* .showToast */ .CF)(_locales__WEBPACK_IMPORTED_MODULE_1__/* ["default"].Copy.Success */ .ZP.Copy.Success);
        } catch (error) {
            (0,_components_ui_lib__WEBPACK_IMPORTED_MODULE_0__/* .showToast */ .CF)(_locales__WEBPACK_IMPORTED_MODULE_1__/* ["default"].Copy.Failed */ .ZP.Copy.Failed);
        }
        document.body.removeChild(textArea);
    }
}
function downloadAs(text, filename) {
    const element = document.createElement("a");
    element.setAttribute("href", "data:text/plain;charset=utf-8," + encodeURIComponent(text));
    element.setAttribute("download", filename);
    element.style.display = "none";
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);
}
function isIOS() {
    const userAgent = navigator.userAgent.toLowerCase();
    return /iphone|ipad|ipod/.test(userAgent);
}
function isMobileScreen() {
    return window.innerWidth <= 600;
}
function isFirefox() {
    return typeof navigator !== "undefined" && /firefox/i.test(navigator.userAgent);
}
function selectOrCopy(el, content) {
    const currentSelection = window.getSelection();
    if (currentSelection?.type === "Range") {
        return false;
    }
    copyToClipboard(content);
    return true;
}
function queryMeta(key, defaultValue) {
    let ret;
    if (document) {
        const meta = document.head.querySelector(`meta[name='${key}']`);
        ret = meta?.content ?? "";
    } else {
        ret = defaultValue ?? "";
    }
    return ret;
}
let currentId;
function getCurrentVersion() {
    if (currentId) {
        return currentId;
    }
    currentId = queryMeta("version");
    return currentId;
}
function getEmojiUrl(unified, style) {
    return `https://cdn.staticfile.org/emoji-datasource-apple/14.0.0/img/${style}/64/${unified}.png`;
}
function getDomContentWidth(dom) {
    const style = window.getComputedStyle(dom);
    const paddingWidth = parseFloat(style.paddingLeft) + parseFloat(style.paddingRight);
    const width = dom.clientWidth - paddingWidth;
    return width;
}
function getOrCreateMeasureDom(id, init) {
    let dom = document.getElementById(id);
    if (!dom) {
        dom = document.createElement("span");
        dom.style.position = "absolute";
        dom.style.wordBreak = "break-word";
        dom.style.fontSize = "14px";
        dom.style.transform = "translateY(-200vh)";
        dom.style.pointerEvents = "none";
        dom.style.opacity = "0";
        dom.id = id;
        document.body.appendChild(dom);
        init?.(dom);
    }
    return dom;
}
function autoGrowTextArea(dom) {
    const measureDom = getOrCreateMeasureDom("__measure");
    const singleLineDom = getOrCreateMeasureDom("__single_measure", (dom)=>{
        dom.innerText = "TEXT_FOR_MEASURE";
    });
    const width = getDomContentWidth(dom);
    measureDom.style.width = width + "px";
    measureDom.innerHTML = dom.value.trim().length > 0 ? dom.value : "1";
    const lineWrapCount = Math.max(0, dom.value.split("\n").length - 1);
    const height = parseFloat(window.getComputedStyle(measureDom).height);
    const singleLineHeight = parseFloat(window.getComputedStyle(singleLineDom).height);
    const rows = Math.round(height / singleLineHeight) + lineWrapCount;
    return rows;
}


/***/ }),

/***/ 8036:
/***/ (() => {



/***/ }),

/***/ 6741:
/***/ (() => {



/***/ }),

/***/ 5322:
/***/ (() => {



/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [359,49], () => (__webpack_exec__(5324)));
module.exports = __webpack_exports__;

})();